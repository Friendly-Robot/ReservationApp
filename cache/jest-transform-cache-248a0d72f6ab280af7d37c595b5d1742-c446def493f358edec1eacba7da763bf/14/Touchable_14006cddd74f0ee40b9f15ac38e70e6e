fcdcc3bb1e7749a21a10104090dcbcc6
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var BoundingDimensions = require('BoundingDimensions');

var Platform = require('Platform');

var Position = require('Position');

var React = require('React');

var ReactNative = require('ReactNative');

var StyleSheet = require('StyleSheet');

var TVEventHandler = require('TVEventHandler');

var UIManager = require('UIManager');

var View = require('View');

var keyMirror = require('fbjs/lib/keyMirror');

var normalizeColor = require('normalizeColor');

var extractSingleTouch = function extractSingleTouch(nativeEvent) {
  var touches = nativeEvent.touches;
  var changedTouches = nativeEvent.changedTouches;
  var hasTouches = touches && touches.length > 0;
  var hasChangedTouches = changedTouches && changedTouches.length > 0;
  return !hasTouches && hasChangedTouches ? changedTouches[0] : hasTouches ? touches[0] : nativeEvent;
};

var States = keyMirror({
  NOT_RESPONDER: null,
  RESPONDER_INACTIVE_PRESS_IN: null,
  RESPONDER_INACTIVE_PRESS_OUT: null,
  RESPONDER_ACTIVE_PRESS_IN: null,
  RESPONDER_ACTIVE_PRESS_OUT: null,
  RESPONDER_ACTIVE_LONG_PRESS_IN: null,
  RESPONDER_ACTIVE_LONG_PRESS_OUT: null,
  ERROR: null
});
var baseStatesConditions = {
  NOT_RESPONDER: false,
  RESPONDER_INACTIVE_PRESS_IN: false,
  RESPONDER_INACTIVE_PRESS_OUT: false,
  RESPONDER_ACTIVE_PRESS_IN: false,
  RESPONDER_ACTIVE_PRESS_OUT: false,
  RESPONDER_ACTIVE_LONG_PRESS_IN: false,
  RESPONDER_ACTIVE_LONG_PRESS_OUT: false,
  ERROR: false
};
var IsActive = (0, _objectSpread2.default)({}, baseStatesConditions, {
  RESPONDER_ACTIVE_PRESS_OUT: true,
  RESPONDER_ACTIVE_PRESS_IN: true
});
var IsPressingIn = (0, _objectSpread2.default)({}, baseStatesConditions, {
  RESPONDER_INACTIVE_PRESS_IN: true,
  RESPONDER_ACTIVE_PRESS_IN: true,
  RESPONDER_ACTIVE_LONG_PRESS_IN: true
});
var IsLongPressingIn = (0, _objectSpread2.default)({}, baseStatesConditions, {
  RESPONDER_ACTIVE_LONG_PRESS_IN: true
});
var Signals = keyMirror({
  DELAY: null,
  RESPONDER_GRANT: null,
  RESPONDER_RELEASE: null,
  RESPONDER_TERMINATED: null,
  ENTER_PRESS_RECT: null,
  LEAVE_PRESS_RECT: null,
  LONG_PRESS_DETECTED: null
});
var Transitions = {
  NOT_RESPONDER: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.RESPONDER_INACTIVE_PRESS_IN,
    RESPONDER_RELEASE: States.ERROR,
    RESPONDER_TERMINATED: States.ERROR,
    ENTER_PRESS_RECT: States.ERROR,
    LEAVE_PRESS_RECT: States.ERROR,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_INACTIVE_PRESS_IN: {
    DELAY: States.RESPONDER_ACTIVE_PRESS_IN,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_INACTIVE_PRESS_OUT: {
    DELAY: States.RESPONDER_ACTIVE_PRESS_OUT,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_ACTIVE_PRESS_IN: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.RESPONDER_ACTIVE_LONG_PRESS_IN
  },
  RESPONDER_ACTIVE_PRESS_OUT: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_ACTIVE_LONG_PRESS_IN: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
    LONG_PRESS_DETECTED: States.RESPONDER_ACTIVE_LONG_PRESS_IN
  },
  RESPONDER_ACTIVE_LONG_PRESS_OUT: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  error: {
    DELAY: States.NOT_RESPONDER,
    RESPONDER_GRANT: States.RESPONDER_INACTIVE_PRESS_IN,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.NOT_RESPONDER,
    LEAVE_PRESS_RECT: States.NOT_RESPONDER,
    LONG_PRESS_DETECTED: States.NOT_RESPONDER
  }
};
var HIGHLIGHT_DELAY_MS = 130;
var PRESS_EXPAND_PX = 20;
var LONG_PRESS_THRESHOLD = 500;
var LONG_PRESS_DELAY_MS = LONG_PRESS_THRESHOLD - HIGHLIGHT_DELAY_MS;
var LONG_PRESS_ALLOWED_MOVEMENT = 10;
var TouchableMixin = {
  componentDidMount: function componentDidMount() {
    if (!Platform.isTV) {
      return;
    }

    this._tvEventHandler = new TVEventHandler();

    this._tvEventHandler.enable(this, function (cmp, evt) {
      var myTag = ReactNative.findNodeHandle(cmp);
      evt.dispatchConfig = {};

      if (myTag === evt.tag) {
        if (evt.eventType === 'focus') {
          cmp.touchableHandleFocus(evt);
        } else if (evt.eventType === 'blur') {
          cmp.touchableHandleBlur(evt);
        } else if (evt.eventType === 'select') {
          cmp.touchableHandlePress && !cmp.props.disabled && cmp.touchableHandlePress(evt);
        }
      }
    });
  },
  componentWillUnmount: function componentWillUnmount() {
    if (this._tvEventHandler) {
      this._tvEventHandler.disable();

      delete this._tvEventHandler;
    }

    this.touchableDelayTimeout && clearTimeout(this.touchableDelayTimeout);
    this.longPressDelayTimeout && clearTimeout(this.longPressDelayTimeout);
    this.pressOutDelayTimeout && clearTimeout(this.pressOutDelayTimeout);
  },
  touchableGetInitialState: function touchableGetInitialState() {
    return {
      touchable: {
        touchState: undefined,
        responderID: null
      }
    };
  },
  touchableHandleResponderTerminationRequest: function touchableHandleResponderTerminationRequest() {
    return !this.props.rejectResponderTermination;
  },
  touchableHandleStartShouldSetResponder: function touchableHandleStartShouldSetResponder() {
    return !this.props.disabled;
  },
  touchableLongPressCancelsPress: function touchableLongPressCancelsPress() {
    return true;
  },
  touchableHandleResponderGrant: function touchableHandleResponderGrant(e) {
    var dispatchID = e.currentTarget;
    e.persist();
    this.pressOutDelayTimeout && clearTimeout(this.pressOutDelayTimeout);
    this.pressOutDelayTimeout = null;
    this.state.touchable.touchState = States.NOT_RESPONDER;
    this.state.touchable.responderID = dispatchID;

    this._receiveSignal(Signals.RESPONDER_GRANT, e);

    var delayMS = this.touchableGetHighlightDelayMS !== undefined ? Math.max(this.touchableGetHighlightDelayMS(), 0) : HIGHLIGHT_DELAY_MS;
    delayMS = isNaN(delayMS) ? HIGHLIGHT_DELAY_MS : delayMS;

    if (delayMS !== 0) {
      this.touchableDelayTimeout = setTimeout(this._handleDelay.bind(this, e), delayMS);
    } else {
      this._handleDelay(e);
    }

    var longDelayMS = this.touchableGetLongPressDelayMS !== undefined ? Math.max(this.touchableGetLongPressDelayMS(), 10) : LONG_PRESS_DELAY_MS;
    longDelayMS = isNaN(longDelayMS) ? LONG_PRESS_DELAY_MS : longDelayMS;
    this.longPressDelayTimeout = setTimeout(this._handleLongDelay.bind(this, e), longDelayMS + delayMS);
  },
  touchableHandleResponderRelease: function touchableHandleResponderRelease(e) {
    this._receiveSignal(Signals.RESPONDER_RELEASE, e);
  },
  touchableHandleResponderTerminate: function touchableHandleResponderTerminate(e) {
    this._receiveSignal(Signals.RESPONDER_TERMINATED, e);
  },
  touchableHandleResponderMove: function touchableHandleResponderMove(e) {
    if (!this.state.touchable.positionOnActivate) {
      return;
    }

    var positionOnActivate = this.state.touchable.positionOnActivate;
    var dimensionsOnActivate = this.state.touchable.dimensionsOnActivate;
    var pressRectOffset = this.touchableGetPressRectOffset ? this.touchableGetPressRectOffset() : {
      left: PRESS_EXPAND_PX,
      right: PRESS_EXPAND_PX,
      top: PRESS_EXPAND_PX,
      bottom: PRESS_EXPAND_PX
    };
    var pressExpandLeft = pressRectOffset.left;
    var pressExpandTop = pressRectOffset.top;
    var pressExpandRight = pressRectOffset.right;
    var pressExpandBottom = pressRectOffset.bottom;
    var hitSlop = this.touchableGetHitSlop ? this.touchableGetHitSlop() : null;

    if (hitSlop) {
      pressExpandLeft += hitSlop.left || 0;
      pressExpandTop += hitSlop.top || 0;
      pressExpandRight += hitSlop.right || 0;
      pressExpandBottom += hitSlop.bottom || 0;
    }

    var touch = extractSingleTouch(e.nativeEvent);
    var pageX = touch && touch.pageX;
    var pageY = touch && touch.pageY;

    if (this.pressInLocation) {
      var movedDistance = this._getDistanceBetweenPoints(pageX, pageY, this.pressInLocation.pageX, this.pressInLocation.pageY);

      if (movedDistance > LONG_PRESS_ALLOWED_MOVEMENT) {
        this._cancelLongPressDelayTimeout();
      }
    }

    var isTouchWithinActive = pageX > positionOnActivate.left - pressExpandLeft && pageY > positionOnActivate.top - pressExpandTop && pageX < positionOnActivate.left + dimensionsOnActivate.width + pressExpandRight && pageY < positionOnActivate.top + dimensionsOnActivate.height + pressExpandBottom;

    if (isTouchWithinActive) {
      this._receiveSignal(Signals.ENTER_PRESS_RECT, e);

      var curState = this.state.touchable.touchState;

      if (curState === States.RESPONDER_INACTIVE_PRESS_IN) {
        this._cancelLongPressDelayTimeout();
      }
    } else {
      this._cancelLongPressDelayTimeout();

      this._receiveSignal(Signals.LEAVE_PRESS_RECT, e);
    }
  },
  touchableHandleFocus: function touchableHandleFocus(e) {
    this.props.onFocus && this.props.onFocus(e);
  },
  touchableHandleBlur: function touchableHandleBlur(e) {
    this.props.onBlur && this.props.onBlur(e);
  },
  _remeasureMetricsOnActivation: function _remeasureMetricsOnActivation() {
    var tag = this.state.touchable.responderID;

    if (tag == null) {
      return;
    }

    UIManager.measure(tag, this._handleQueryLayout);
  },
  _handleQueryLayout: function _handleQueryLayout(l, t, w, h, globalX, globalY) {
    if (!l && !t && !w && !h && !globalX && !globalY) {
      return;
    }

    this.state.touchable.positionOnActivate && Position.release(this.state.touchable.positionOnActivate);
    this.state.touchable.dimensionsOnActivate && BoundingDimensions.release(this.state.touchable.dimensionsOnActivate);
    this.state.touchable.positionOnActivate = Position.getPooled(globalX, globalY);
    this.state.touchable.dimensionsOnActivate = BoundingDimensions.getPooled(w, h);
  },
  _handleDelay: function _handleDelay(e) {
    this.touchableDelayTimeout = null;

    this._receiveSignal(Signals.DELAY, e);
  },
  _handleLongDelay: function _handleLongDelay(e) {
    this.longPressDelayTimeout = null;
    var curState = this.state.touchable.touchState;

    if (curState !== States.RESPONDER_ACTIVE_PRESS_IN && curState !== States.RESPONDER_ACTIVE_LONG_PRESS_IN) {
      console.error('Attempted to transition from state `' + curState + '` to `' + States.RESPONDER_ACTIVE_LONG_PRESS_IN + '`, which is not supported. This is ' + 'most likely due to `Touchable.longPressDelayTimeout` not being cancelled.');
    } else {
      this._receiveSignal(Signals.LONG_PRESS_DETECTED, e);
    }
  },
  _receiveSignal: function _receiveSignal(signal, e) {
    var responderID = this.state.touchable.responderID;
    var curState = this.state.touchable.touchState;
    var nextState = Transitions[curState] && Transitions[curState][signal];

    if (!responderID && signal === Signals.RESPONDER_RELEASE) {
      return;
    }

    if (!nextState) {
      throw new Error('Unrecognized signal `' + signal + '` or state `' + curState + '` for Touchable responder `' + responderID + '`');
    }

    if (nextState === States.ERROR) {
      throw new Error('Touchable cannot transition from `' + curState + '` to `' + signal + '` for responder `' + responderID + '`');
    }

    if (curState !== nextState) {
      this._performSideEffectsForTransition(curState, nextState, signal, e);

      this.state.touchable.touchState = nextState;
    }
  },
  _cancelLongPressDelayTimeout: function _cancelLongPressDelayTimeout() {
    this.longPressDelayTimeout && clearTimeout(this.longPressDelayTimeout);
    this.longPressDelayTimeout = null;
  },
  _isHighlight: function _isHighlight(state) {
    return state === States.RESPONDER_ACTIVE_PRESS_IN || state === States.RESPONDER_ACTIVE_LONG_PRESS_IN;
  },
  _savePressInLocation: function _savePressInLocation(e) {
    var touch = extractSingleTouch(e.nativeEvent);
    var pageX = touch && touch.pageX;
    var pageY = touch && touch.pageY;
    var locationX = touch && touch.locationX;
    var locationY = touch && touch.locationY;
    this.pressInLocation = {
      pageX: pageX,
      pageY: pageY,
      locationX: locationX,
      locationY: locationY
    };
  },
  _getDistanceBetweenPoints: function _getDistanceBetweenPoints(aX, aY, bX, bY) {
    var deltaX = aX - bX;
    var deltaY = aY - bY;
    return Math.sqrt(deltaX * deltaX + deltaY * deltaY);
  },
  _performSideEffectsForTransition: function _performSideEffectsForTransition(curState, nextState, signal, e) {
    var curIsHighlight = this._isHighlight(curState);

    var newIsHighlight = this._isHighlight(nextState);

    var isFinalSignal = signal === Signals.RESPONDER_TERMINATED || signal === Signals.RESPONDER_RELEASE;

    if (isFinalSignal) {
      this._cancelLongPressDelayTimeout();
    }

    var isInitialTransition = curState === States.NOT_RESPONDER && nextState === States.RESPONDER_INACTIVE_PRESS_IN;
    var isActiveTransition = !IsActive[curState] && IsActive[nextState];

    if (isInitialTransition || isActiveTransition) {
      this._remeasureMetricsOnActivation();
    }

    if (IsPressingIn[curState] && signal === Signals.LONG_PRESS_DETECTED) {
      this.touchableHandleLongPress && this.touchableHandleLongPress(e);
    }

    if (newIsHighlight && !curIsHighlight) {
      this._startHighlight(e);
    } else if (!newIsHighlight && curIsHighlight) {
      this._endHighlight(e);
    }

    if (IsPressingIn[curState] && signal === Signals.RESPONDER_RELEASE) {
      var hasLongPressHandler = !!this.props.onLongPress;
      var pressIsLongButStillCallOnPress = IsLongPressingIn[curState] && (!hasLongPressHandler || !this.touchableLongPressCancelsPress());
      var shouldInvokePress = !IsLongPressingIn[curState] || pressIsLongButStillCallOnPress;

      if (shouldInvokePress && this.touchableHandlePress) {
        if (!newIsHighlight && !curIsHighlight) {
          this._startHighlight(e);

          this._endHighlight(e);
        }

        if (Platform.OS === 'android') {
          this._playTouchSound();
        }

        this.touchableHandlePress(e);
      }
    }

    this.touchableDelayTimeout && clearTimeout(this.touchableDelayTimeout);
    this.touchableDelayTimeout = null;
  },
  _playTouchSound: function _playTouchSound() {
    UIManager.playTouchSound();
  },
  _startHighlight: function _startHighlight(e) {
    this._savePressInLocation(e);

    this.touchableHandleActivePressIn && this.touchableHandleActivePressIn(e);
  },
  _endHighlight: function _endHighlight(e) {
    var _this = this;

    if (this.touchableHandleActivePressOut) {
      if (this.touchableGetPressOutDelayMS && this.touchableGetPressOutDelayMS()) {
        this.pressOutDelayTimeout = setTimeout(function () {
          _this.touchableHandleActivePressOut(e);
        }, this.touchableGetPressOutDelayMS());
      } else {
        this.touchableHandleActivePressOut(e);
      }
    }
  },
  withoutDefaultFocusAndBlur: {}
};
var touchableHandleFocus = TouchableMixin.touchableHandleFocus,
    touchableHandleBlur = TouchableMixin.touchableHandleBlur,
    TouchableMixinWithoutDefaultFocusAndBlur = (0, _objectWithoutProperties2.default)(TouchableMixin, ["touchableHandleFocus", "touchableHandleBlur"]);
TouchableMixin.withoutDefaultFocusAndBlur = TouchableMixinWithoutDefaultFocusAndBlur;
var Touchable = {
  Mixin: TouchableMixin,
  TOUCH_TARGET_DEBUG: false,
  renderDebugView: function renderDebugView(_ref) {
    var color = _ref.color,
        hitSlop = _ref.hitSlop;

    if (!Touchable.TOUCH_TARGET_DEBUG) {
      return null;
    }

    if (!__DEV__) {
      throw Error('Touchable.TOUCH_TARGET_DEBUG should not be enabled in prod!');
    }

    var debugHitSlopStyle = {};
    hitSlop = hitSlop || {
      top: 0,
      bottom: 0,
      left: 0,
      right: 0
    };

    for (var key in hitSlop) {
      debugHitSlopStyle[key] = -hitSlop[key];
    }

    var normalizedColor = normalizeColor(color);

    if (typeof normalizedColor !== 'number') {
      return null;
    }

    var hexColor = '#' + ('00000000' + normalizedColor.toString(16)).substr(-8);
    return React.createElement(View, {
      pointerEvents: "none",
      style: [styles.debug, (0, _objectSpread2.default)({
        borderColor: hexColor.slice(0, -2) + '55',
        backgroundColor: hexColor.slice(0, -2) + '0F'
      }, debugHitSlopStyle)]
    });
  }
};
var styles = StyleSheet.create({
  debug: {
    position: 'absolute',
    borderWidth: 1,
    borderStyle: 'dashed'
  }
});
module.exports = Touchable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZS5qcyJdLCJuYW1lcyI6WyJCb3VuZGluZ0RpbWVuc2lvbnMiLCJyZXF1aXJlIiwiUGxhdGZvcm0iLCJQb3NpdGlvbiIsIlJlYWN0IiwiUmVhY3ROYXRpdmUiLCJTdHlsZVNoZWV0IiwiVFZFdmVudEhhbmRsZXIiLCJVSU1hbmFnZXIiLCJWaWV3Iiwia2V5TWlycm9yIiwibm9ybWFsaXplQ29sb3IiLCJleHRyYWN0U2luZ2xlVG91Y2giLCJuYXRpdmVFdmVudCIsInRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsImhhc1RvdWNoZXMiLCJsZW5ndGgiLCJoYXNDaGFuZ2VkVG91Y2hlcyIsIlN0YXRlcyIsIk5PVF9SRVNQT05ERVIiLCJSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU4iLCJSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUIiwiUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTiIsIlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUIiwiUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOIiwiUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVCIsIkVSUk9SIiwiYmFzZVN0YXRlc0NvbmRpdGlvbnMiLCJJc0FjdGl2ZSIsIklzUHJlc3NpbmdJbiIsIklzTG9uZ1ByZXNzaW5nSW4iLCJTaWduYWxzIiwiREVMQVkiLCJSRVNQT05ERVJfR1JBTlQiLCJSRVNQT05ERVJfUkVMRUFTRSIsIlJFU1BPTkRFUl9URVJNSU5BVEVEIiwiRU5URVJfUFJFU1NfUkVDVCIsIkxFQVZFX1BSRVNTX1JFQ1QiLCJMT05HX1BSRVNTX0RFVEVDVEVEIiwiVHJhbnNpdGlvbnMiLCJlcnJvciIsIkhJR0hMSUdIVF9ERUxBWV9NUyIsIlBSRVNTX0VYUEFORF9QWCIsIkxPTkdfUFJFU1NfVEhSRVNIT0xEIiwiTE9OR19QUkVTU19ERUxBWV9NUyIsIkxPTkdfUFJFU1NfQUxMT1dFRF9NT1ZFTUVOVCIsIlRvdWNoYWJsZU1peGluIiwiY29tcG9uZW50RGlkTW91bnQiLCJpc1RWIiwiX3R2RXZlbnRIYW5kbGVyIiwiZW5hYmxlIiwiY21wIiwiZXZ0IiwibXlUYWciLCJmaW5kTm9kZUhhbmRsZSIsImRpc3BhdGNoQ29uZmlnIiwidGFnIiwiZXZlbnRUeXBlIiwidG91Y2hhYmxlSGFuZGxlRm9jdXMiLCJ0b3VjaGFibGVIYW5kbGVCbHVyIiwidG91Y2hhYmxlSGFuZGxlUHJlc3MiLCJwcm9wcyIsImRpc2FibGVkIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJkaXNhYmxlIiwidG91Y2hhYmxlRGVsYXlUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwibG9uZ1ByZXNzRGVsYXlUaW1lb3V0IiwicHJlc3NPdXREZWxheVRpbWVvdXQiLCJ0b3VjaGFibGVHZXRJbml0aWFsU3RhdGUiLCJ0b3VjaGFibGUiLCJ0b3VjaFN0YXRlIiwidW5kZWZpbmVkIiwicmVzcG9uZGVySUQiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJyZWplY3RSZXNwb25kZXJUZXJtaW5hdGlvbiIsInRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwidG91Y2hhYmxlTG9uZ1ByZXNzQ2FuY2Vsc1ByZXNzIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQiLCJlIiwiZGlzcGF0Y2hJRCIsImN1cnJlbnRUYXJnZXQiLCJwZXJzaXN0Iiwic3RhdGUiLCJfcmVjZWl2ZVNpZ25hbCIsImRlbGF5TVMiLCJ0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TIiwiTWF0aCIsIm1heCIsImlzTmFOIiwic2V0VGltZW91dCIsIl9oYW5kbGVEZWxheSIsImJpbmQiLCJsb25nRGVsYXlNUyIsInRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVMiLCJfaGFuZGxlTG9uZ0RlbGF5IiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmUiLCJwb3NpdGlvbk9uQWN0aXZhdGUiLCJkaW1lbnNpb25zT25BY3RpdmF0ZSIsInByZXNzUmVjdE9mZnNldCIsInRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsInByZXNzRXhwYW5kTGVmdCIsInByZXNzRXhwYW5kVG9wIiwicHJlc3NFeHBhbmRSaWdodCIsInByZXNzRXhwYW5kQm90dG9tIiwiaGl0U2xvcCIsInRvdWNoYWJsZUdldEhpdFNsb3AiLCJ0b3VjaCIsInBhZ2VYIiwicGFnZVkiLCJwcmVzc0luTG9jYXRpb24iLCJtb3ZlZERpc3RhbmNlIiwiX2dldERpc3RhbmNlQmV0d2VlblBvaW50cyIsIl9jYW5jZWxMb25nUHJlc3NEZWxheVRpbWVvdXQiLCJpc1RvdWNoV2l0aGluQWN0aXZlIiwid2lkdGgiLCJoZWlnaHQiLCJjdXJTdGF0ZSIsIm9uRm9jdXMiLCJvbkJsdXIiLCJfcmVtZWFzdXJlTWV0cmljc09uQWN0aXZhdGlvbiIsIm1lYXN1cmUiLCJfaGFuZGxlUXVlcnlMYXlvdXQiLCJsIiwidCIsInciLCJoIiwiZ2xvYmFsWCIsImdsb2JhbFkiLCJyZWxlYXNlIiwiZ2V0UG9vbGVkIiwiY29uc29sZSIsInNpZ25hbCIsIm5leHRTdGF0ZSIsIkVycm9yIiwiX3BlcmZvcm1TaWRlRWZmZWN0c0ZvclRyYW5zaXRpb24iLCJfaXNIaWdobGlnaHQiLCJfc2F2ZVByZXNzSW5Mb2NhdGlvbiIsImxvY2F0aW9uWCIsImxvY2F0aW9uWSIsImFYIiwiYVkiLCJiWCIsImJZIiwiZGVsdGFYIiwiZGVsdGFZIiwic3FydCIsImN1cklzSGlnaGxpZ2h0IiwibmV3SXNIaWdobGlnaHQiLCJpc0ZpbmFsU2lnbmFsIiwiaXNJbml0aWFsVHJhbnNpdGlvbiIsImlzQWN0aXZlVHJhbnNpdGlvbiIsInRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyIsIl9zdGFydEhpZ2hsaWdodCIsIl9lbmRIaWdobGlnaHQiLCJoYXNMb25nUHJlc3NIYW5kbGVyIiwib25Mb25nUHJlc3MiLCJwcmVzc0lzTG9uZ0J1dFN0aWxsQ2FsbE9uUHJlc3MiLCJzaG91bGRJbnZva2VQcmVzcyIsIk9TIiwiX3BsYXlUb3VjaFNvdW5kIiwicGxheVRvdWNoU291bmQiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQiLCJ0b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMiLCJ3aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1ciIsIlRvdWNoYWJsZU1peGluV2l0aG91dERlZmF1bHRGb2N1c0FuZEJsdXIiLCJUb3VjaGFibGUiLCJNaXhpbiIsIlRPVUNIX1RBUkdFVF9ERUJVRyIsInJlbmRlckRlYnVnVmlldyIsImNvbG9yIiwiX19ERVZfXyIsImRlYnVnSGl0U2xvcFN0eWxlIiwia2V5Iiwibm9ybWFsaXplZENvbG9yIiwiaGV4Q29sb3IiLCJ0b1N0cmluZyIsInN1YnN0ciIsInN0eWxlcyIsImRlYnVnIiwiYm9yZGVyQ29sb3IiLCJzbGljZSIsImJhY2tncm91bmRDb2xvciIsImNyZWF0ZSIsInBvc2l0aW9uIiwiYm9yZGVyV2lkdGgiLCJib3JkZXJTdHlsZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOzs7Ozs7OztBQUVBLElBQU1BLGtCQUFrQixHQUFHQyxPQUFPLENBQUMsb0JBQUQsQ0FBbEM7O0FBQ0EsSUFBTUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFDQSxJQUFNRSxRQUFRLEdBQUdGLE9BQU8sQ0FBQyxVQUFELENBQXhCOztBQUNBLElBQU1HLEtBQUssR0FBR0gsT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsSUFBTUksV0FBVyxHQUFHSixPQUFPLENBQUMsYUFBRCxDQUEzQjs7QUFDQSxJQUFNSyxVQUFVLEdBQUdMLE9BQU8sQ0FBQyxZQUFELENBQTFCOztBQUNBLElBQU1NLGNBQWMsR0FBR04sT0FBTyxDQUFDLGdCQUFELENBQTlCOztBQUNBLElBQU1PLFNBQVMsR0FB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QSxTQUFLLElBQU00RSxHQUFYLElBQWtCckUsT0FBbEIsRUFBMkI7QUFDekJvRSxNQUFBQSxpQkFBaUIsQ0FBQ0MsR0FBRCxDQUFqQixHQUF5QixDQUFDckUsT0FBTyxDQUFDcUUsR0FBRCxDQUFqQztBQUNEOztBQUNELFFBQU1DLGVBQWUsR0FBRzNLLGNBQWMsQ0FBQ3VLLEtBQUQsQ0FBdEM7O0FBQ0EsUUFBSSxPQUFPSSxlQUFQLEtBQTJCLFFBQS9CLEVBQXlDO0FBQ3ZDLGFBQU8sSUFBUDtBQUNEOztBQUNELFFBQU1DLFFBQVEsR0FDWixNQUFNLENBQUMsYUFBYUQsZUFBZSxDQUFDRSxRQUFoQixDQUF5QixFQUF6QixDQUFkLEVBQTRDQyxNQUE1QyxDQUFtRCxDQUFDLENBQXBELENBRFI7QUFFQSxXQUNFLG9CQUFDLElBQUQ7QUFDRSxNQUFBLGFBQWEsRUFBQyxNQURoQjtBQUVFLE1BQUEsS0FBSyxFQUFFLENBQ0xDLE1BQU0sQ0FBQ0MsS0FERjtBQUdIQyxRQUFBQSxXQUFXLEVBQUVMLFFBQVEsQ0FBQ00sS0FBVCxDQUFlLENBQWYsRUFBa0IsQ0FBQyxDQUFuQixJQUF3QixJQUhsQztBQUlIQyxRQUFBQSxlQUFlLEVBQUVQLFFBQVEsQ0FBQ00sS0FBVCxDQUFlLENBQWYsRUFBa0IsQ0FBQyxDQUFuQixJQUF3QjtBQUp0QyxTQUtBVCxpQkFMQTtBQUZULE1BREY7QUFhRDtBQTdDZSxDQUFsQjtBQWdEQSxJQUFNTSxNQUFNLEdBQUdwTCxVQUFVLENBQUN5TCxNQUFYLENBQWtCO0FBQy9CSixFQUFBQSxLQUFLLEVBQUU7QUFDTEssSUFBQUEsUUFBUSxFQUFFLFVBREw7QUFFTEMsSUFBQUEsV0FBVyxFQUFFLENBRlI7QUFHTEMsSUFBQUEsV0FBVyxFQUFFO0FBSFI7QUFEd0IsQ0FBbEIsQ0FBZjtBQVFBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJ0QixTQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IEJvdW5kaW5nRGltZW5zaW9ucyA9IHJlcXVpcmUoJ0JvdW5kaW5nRGltZW5zaW9ucycpO1xuY29uc3QgUGxhdGZvcm0gPSByZXF1aXJlKCdQbGF0Zm9ybScpO1xuY29uc3QgUG9zaXRpb24gPSByZXF1aXJlKCdQb3NpdGlvbicpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdSZWFjdCcpO1xuY29uc3QgUmVhY3ROYXRpdmUgPSByZXF1aXJlKCdSZWFjdE5hdGl2ZScpO1xuY29uc3QgU3R5bGVTaGVldCA9IHJlcXVpcmUoJ1N0eWxlU2hlZXQnKTtcbmNvbnN0IFRWRXZlbnRIYW5kbGVyID0gcmVxdWlyZSgnVFZFdmVudEhhbmRsZXInKTtcbmNvbnN0IFVJTWFuYWdlciA9IHJlcXVpcmUoJ1VJTWFuYWdlcicpO1xuY29uc3QgVmlldyA9IHJlcXVpcmUoJ1ZpZXcnKTtcblxuY29uc3Qga2V5TWlycm9yID0gcmVxdWlyZSgnZmJqcy9saWIva2V5TWlycm9yJyk7XG5jb25zdCBub3JtYWxpemVDb2xvciA9IHJlcXVpcmUoJ25vcm1hbGl6ZUNvbG9yJyk7XG5cbmltcG9ydCB0eXBlIHtQcmVzc0V2ZW50fSBmcm9tICdDb3JlRXZlbnRUeXBlcyc7XG5pbXBvcnQgdHlwZSB7RWRnZUluc2V0c1Byb3B9IGZyb20gJ0VkZ2VJbnNldHNQcm9wVHlwZSc7XG5cbmNvbnN0IGV4dHJhY3RTaW5nbGVUb3VjaCA9IG5hdGl2ZUV2ZW50ID0+IHtcbiAgY29uc3QgdG91Y2hlcyA9IG5hdGl2ZUV2ZW50LnRvdWNoZXM7XG4gIGNvbnN0IGNoYW5nZWRUb3VjaGVzID0gbmF0aXZlRXZlbnQuY2hhbmdlZFRvdWNoZXM7XG4gIGNvbnN0IGhhc1RvdWNoZXMgPSB0b3VjaGVzICYmIHRvdWNoZXMubGVuZ3RoID4gMDtcbiAgY29uc3QgaGFzQ2hhbmdlZFRvdWNoZXMgPSBjaGFuZ2VkVG91Y2hlcyAmJiBjaGFuZ2VkVG91Y2hlcy5sZW5ndGggPiAwO1xuXG4gIHJldHVybiAhaGFzVG91Y2hlcyAmJiBoYXNDaGFuZ2VkVG91Y2hlc1xuICAgID8gY2hhbmdlZFRvdWNoZXNbMF1cbiAgICA6IGhhc1RvdWNoZXNcbiAgICAgID8gdG91Y2hlc1swXVxuICAgICAgOiBuYXRpdmVFdmVudDtcbn07XG5cbi8qKlxuICogYFRvdWNoYWJsZWA6IFRhcHMgZG9uZSByaWdodC5cbiAqXG4gKiBZb3UgaG9vayB5b3VyIGBSZXNwb25kZXJFdmVudFBsdWdpbmAgZXZlbnRzIGludG8gYFRvdWNoYWJsZWAuIGBUb3VjaGFibGVgXG4gKiB3aWxsIG1lYXN1cmUgdGltZS9nZW9tZXRyeSBhbmQgdGVsbHMgeW91IHdoZW4gdG8gZ2l2ZSBmZWVkYmFjayB0byB0aGUgdXNlci5cbiAqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09IFRvdWNoYWJsZSBUdXRvcmlhbCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBUaGUgYFRvdWNoYWJsZWAgbWl4aW4gaGVscHMgeW91IGhhbmRsZSB0aGUgXCJwcmVzc1wiIGludGVyYWN0aW9uLiBJdCBhbmFseXplc1xuICogdGhlIGdlb21ldHJ5IG9mIGVsZW1lbnRzLCBhbmQgb2JzZXJ2ZXMgd2hlbiBhbm90aGVyIHJlc3BvbmRlciAoc2Nyb2xsIHZpZXdcbiAqIGV0YykgaGFzIHN0b2xlbiB0aGUgdG91Y2ggbG9jay4gSXQgbm90aWZpZXMgeW91ciBjb21wb25lbnQgd2hlbiBpdCBzaG91bGRcbiAqIGdpdmUgZmVlZGJhY2sgdG8gdGhlIHVzZXIuIChib3VuY2luZy9oaWdobGlnaHRpbmcvdW5oaWdobGlnaHRpbmcpLlxuICpcbiAqIC0gV2hlbiBhIHRvdWNoIHdhcyBhY3RpdmF0ZWQgKHR5cGljYWxseSB5b3UgaGlnaGxpZ2h0KVxuICogLSBXaGVuIGEgdG91Y2ggd2FzIGRlYWN0aXZhdGVkICh0eXBpY2FsbHkgeW91IHVuaGlnaGxpZ2h0KVxuICogLSBXaGVuIGEgdG91Y2ggd2FzIFwicHJlc3NlZFwiIC0gYSB0b3VjaCBlbmRlZCB3aGlsZSBzdGlsbCB3aXRoaW4gdGhlIGdlb21ldHJ5XG4gKiAgIG9mIHRoZSBlbGVtZW50LCBhbmQgbm8gb3RoZXIgZWxlbWVudCAobGlrZSBzY3JvbGxlcikgaGFzIFwic3RvbGVuXCIgdG91Y2hcbiAqICAgbG9jayAoXCJyZXNwb25kZXJcIikgKFR5cGljYWxseSB5b3UgYm91bmNlIHRoZSBlbGVtZW50KS5cbiAqXG4gKiBBIGdvb2QgdGFwIGludGVyYWN0aW9uIGlzbid0IGFzIHNpbXBsZSBhcyB5b3UgbWlnaHQgdGhpbmsuIFRoZXJlIHNob3VsZCBiZSBhXG4gKiBzbGlnaHQgZGVsYXkgYmVmb3JlIHNob3dpbmcgYSBoaWdobGlnaHQgd2hlbiBzdGFydGluZyBhIHRvdWNoLiBJZiBhXG4gKiBzdWJzZXF1ZW50IHRvdWNoIG1vdmUgZXhjZWVkcyB0aGUgYm91bmRhcnkgb2YgdGhlIGVsZW1lbnQsIGl0IHNob3VsZFxuICogdW5oaWdobGlnaHQsIGJ1dCBpZiB0aGF0IHNhbWUgdG91Y2ggaXMgYnJvdWdodCBiYWNrIHdpdGhpbiB0aGUgYm91bmRhcnksIGl0XG4gKiBzaG91bGQgcmVoaWdobGlnaHQgYWdhaW4uIEEgdG91Y2ggY2FuIG1vdmUgaW4gYW5kIG91dCBvZiB0aGF0IGJvdW5kYXJ5XG4gKiBzZXZlcmFsIHRpbWVzLCBlYWNoIHRpbWUgdG9nZ2xpbmcgaGlnaGxpZ2h0aW5nLCBidXQgYSBcInByZXNzXCIgaXMgb25seVxuICogdHJpZ2dlcmVkIGlmIHRoYXQgdG91Y2ggZW5kcyB3aGlsZSB3aXRoaW4gdGhlIGVsZW1lbnQncyBib3VuZGFyeSBhbmQgbm9cbiAqIHNjcm9sbGVyIChvciBhbnl0aGluZyBlbHNlKSBoYXMgc3RvbGVuIHRoZSBsb2NrIG9uIHRvdWNoZXMuXG4gKlxuICogVG8gY3JlYXRlIGEgbmV3IHR5cGUgb2YgY29tcG9uZW50IHRoYXQgaGFuZGxlcyBpbnRlcmFjdGlvbiB1c2luZyB0aGVcbiAqIGBUb3VjaGFibGVgIG1peGluLCBkbyB0aGUgZm9sbG93aW5nOlxuICpcbiAqIC0gSW5pdGlhbGl6ZSB0aGUgYFRvdWNoYWJsZWAgc3RhdGUuXG4gKlxuICogICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiBtZXJnZSh0aGlzLnRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSgpLCB5b3VyQ29tcG9uZW50U3RhdGUpO1xuICogICB9XG4gKlxuICogLSBDaG9vc2UgdGhlIHJlbmRlcmVkIGNvbXBvbmVudCB3aG8ncyB0b3VjaGVzIHNob3VsZCBzdGFydCB0aGUgaW50ZXJhY3RpdmVcbiAqICAgc2VxdWVuY2UuIE9uIHRoYXQgcmVuZGVyZWQgbm9kZSwgZm9yd2FyZCBhbGwgYFRvdWNoYWJsZWAgcmVzcG9uZGVyXG4gKiAgIGhhbmRsZXJzLiBZb3UgY2FuIGNob29zZSBhbnkgcmVuZGVyZWQgbm9kZSB5b3UgbGlrZS4gQ2hvb3NlIGEgbm9kZSB3aG9zZVxuICogICBoaXQgdGFyZ2V0IHlvdSdkIGxpa2UgdG8gaW5zdGlnYXRlIHRoZSBpbnRlcmFjdGlvbiBzZXF1ZW5jZTpcbiAqXG4gKiAgIC8vIEluIHJlbmRlciBmdW5jdGlvbjpcbiAqICAgcmV0dXJuIChcbiAqICAgICA8Vmlld1xuICogICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcj17dGhpcy50b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlcn1cbiAqICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0PXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdH1cbiAqICAgICAgIG9uUmVzcG9uZGVyR3JhbnQ9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnR9XG4gKiAgICAgICBvblJlc3BvbmRlck1vdmU9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZX1cbiAqICAgICAgIG9uUmVzcG9uZGVyUmVsZWFzZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlfVxuICogICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGU9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlfT5cbiAqICAgICAgIDxWaWV3PlxuICogICAgICAgICBFdmVuIHRob3VnaCB0aGUgaGl0IGRldGVjdGlvbi9pbnRlcmFjdGlvbnMgYXJlIHRyaWdnZXJlZCBieSB0aGVcbiAqICAgICAgICAgd3JhcHBpbmcgKHR5cGljYWxseSBsYXJnZXIpIG5vZGUsIHdlIHVzdWFsbHkgZW5kIHVwIGltcGxlbWVudGluZ1xuICogICAgICAgICBjdXN0b20gbG9naWMgdGhhdCBoaWdobGlnaHRzIHRoaXMgaW5uZXIgb25lLlxuICogICAgICAgPC9WaWV3PlxuICogICAgIDwvVmlldz5cbiAqICAgKTtcbiAqXG4gKiAtIFlvdSBtYXkgc2V0IHVwIHlvdXIgb3duIGhhbmRsZXJzIGZvciBlYWNoIG9mIHRoZXNlIGV2ZW50cywgc28gbG9uZyBhcyB5b3VcbiAqICAgYWxzbyBpbnZva2UgdGhlIGB0b3VjaGFibGUqYCBoYW5kbGVycyBpbnNpZGUgb2YgeW91ciBjdXN0b20gaGFuZGxlci5cbiAqXG4gKiAtIEltcGxlbWVudCB0aGUgaGFuZGxlcnMgb24geW91ciBjb21wb25lbnQgY2xhc3MgaW4gb3JkZXIgdG8gcHJvdmlkZVxuICogICBmZWVkYmFjayB0byB0aGUgdXNlci4gU2VlIGRvY3VtZW50YXRpb24gZm9yIGVhY2ggb2YgdGhlc2UgY2xhc3MgbWV0aG9kc1xuICogICB0aGF0IHlvdSBzaG91bGQgaW1wbGVtZW50LlxuICpcbiAqICAgdG91Y2hhYmxlSGFuZGxlUHJlc3M6IGZ1bmN0aW9uKCkge1xuICogICAgICB0aGlzLnBlcmZvcm1Cb3VuY2VBbmltYXRpb24oKTsgIC8vIG9yIHdoYXRldmVyIHlvdSB3YW50IHRvIGRvLlxuICogICB9LFxuICogICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luOiBmdW5jdGlvbigpIHtcbiAqICAgICB0aGlzLmJlZ2luSGlnaGxpZ2h0aW5nKC4uLik7ICAvLyBXaGF0ZXZlciB5b3UgbGlrZSB0byBjb252ZXkgYWN0aXZhdGlvblxuICogICB9LFxuICogICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dDogZnVuY3Rpb24oKSB7XG4gKiAgICAgdGhpcy5lbmRIaWdobGlnaHRpbmcoLi4uKTsgIC8vIFdoYXRldmVyIHlvdSBsaWtlIHRvIGNvbnZleSBkZWFjdGl2YXRpb25cbiAqICAgfSxcbiAqXG4gKiAtIFRoZXJlIGFyZSBtb3JlIGFkdmFuY2VkIG1ldGhvZHMgeW91IGNhbiBpbXBsZW1lbnQgKHNlZSBkb2N1bWVudGF0aW9uIGJlbG93KTpcbiAqICAgdG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUzogZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIDIwO1xuICogICB9XG4gKiAgIC8vIEluIHByYWN0aWNlLCAqYWx3YXlzKiB1c2UgYSBwcmVkZWNsYXJlZCBjb25zdGFudCAoY29uc2VydmUgbWVtb3J5KS5cbiAqICAgdG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0OiBmdW5jdGlvbigpIHtcbiAqICAgICByZXR1cm4ge3RvcDogMjAsIGxlZnQ6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMTAwfTtcbiAqICAgfVxuICovXG5cbi8qKlxuICogVG91Y2hhYmxlIHN0YXRlcy5cbiAqL1xuXG5jb25zdCBTdGF0ZXMgPSBrZXlNaXJyb3Ioe1xuICBOT1RfUkVTUE9OREVSOiBudWxsLCAvLyBOb3QgdGhlIHJlc3BvbmRlclxuICBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU46IG51bGwsIC8vIFJlc3BvbmRlciwgaW5hY3RpdmUsIGluIHRoZSBgUHJlc3NSZWN0YFxuICBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUOiBudWxsLCAvLyBSZXNwb25kZXIsIGluYWN0aXZlLCBvdXQgb2YgYFByZXNzUmVjdGBcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTjogbnVsbCwgLy8gUmVzcG9uZGVyLCBhY3RpdmUsIGluIHRoZSBgUHJlc3NSZWN0YFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVDogbnVsbCwgLy8gUmVzcG9uZGVyLCBhY3RpdmUsIG91dCBvZiBgUHJlc3NSZWN0YFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU46IG51bGwsIC8vIFJlc3BvbmRlciwgYWN0aXZlLCBpbiB0aGUgYFByZXNzUmVjdGAsIGFmdGVyIGxvbmcgcHJlc3MgdGhyZXNob2xkXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVQ6IG51bGwsIC8vIFJlc3BvbmRlciwgYWN0aXZlLCBvdXQgb2YgYFByZXNzUmVjdGAsIGFmdGVyIGxvbmcgcHJlc3MgdGhyZXNob2xkXG4gIEVSUk9SOiBudWxsLFxufSk7XG5cbnR5cGUgU3RhdGUgPVxuICB8IHR5cGVvZiBTdGF0ZXMuTk9UX1JFU1BPTkRFUlxuICB8IHR5cGVvZiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOXG4gIHwgdHlwZW9mIFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUXG4gIHwgdHlwZW9mIFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOXG4gIHwgdHlwZW9mIFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVFxuICB8IHR5cGVvZiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOXG4gIHwgdHlwZW9mIFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VUXG4gIHwgdHlwZW9mIFN0YXRlcy5FUlJPUjtcblxuLypcbiAqIFF1aWNrIGxvb2t1cCBtYXAgZm9yIHN0YXRlcyB0aGF0IGFyZSBjb25zaWRlcmVkIHRvIGJlIFwiYWN0aXZlXCJcbiAqL1xuXG5jb25zdCBiYXNlU3RhdGVzQ29uZGl0aW9ucyA9IHtcbiAgTk9UX1JFU1BPTkRFUjogZmFsc2UsXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTjogZmFsc2UsXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVQ6IGZhbHNlLFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOOiBmYWxzZSxcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19PVVQ6IGZhbHNlLFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU46IGZhbHNlLFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VUOiBmYWxzZSxcbiAgRVJST1I6IGZhbHNlLFxufTtcblxuY29uc3QgSXNBY3RpdmUgPSB7XG4gIC4uLmJhc2VTdGF0ZXNDb25kaXRpb25zLFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVDogdHJ1ZSxcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTjogdHJ1ZSxcbn07XG5cbi8qKlxuICogUXVpY2sgbG9va3VwIGZvciBzdGF0ZXMgdGhhdCBhcmUgY29uc2lkZXJlZCB0byBiZSBcInByZXNzaW5nXCIgYW5kIGFyZVxuICogdGhlcmVmb3JlIGVsaWdpYmxlIHRvIHJlc3VsdCBpbiBhIFwic2VsZWN0aW9uXCIgaWYgdGhlIHByZXNzIHN0b3BzLlxuICovXG5jb25zdCBJc1ByZXNzaW5nSW4gPSB7XG4gIC4uLmJhc2VTdGF0ZXNDb25kaXRpb25zLFxuICBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU46IHRydWUsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU46IHRydWUsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjogdHJ1ZSxcbn07XG5cbmNvbnN0IElzTG9uZ1ByZXNzaW5nSW4gPSB7XG4gIC4uLmJhc2VTdGF0ZXNDb25kaXRpb25zLFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU46IHRydWUsXG59O1xuXG4vKipcbiAqIElucHV0cyB0byB0aGUgc3RhdGUgbWFjaGluZS5cbiAqL1xuY29uc3QgU2lnbmFscyA9IGtleU1pcnJvcih7XG4gIERFTEFZOiBudWxsLFxuICBSRVNQT05ERVJfR1JBTlQ6IG51bGwsXG4gIFJFU1BPTkRFUl9SRUxFQVNFOiBudWxsLFxuICBSRVNQT05ERVJfVEVSTUlOQVRFRDogbnVsbCxcbiAgRU5URVJfUFJFU1NfUkVDVDogbnVsbCxcbiAgTEVBVkVfUFJFU1NfUkVDVDogbnVsbCxcbiAgTE9OR19QUkVTU19ERVRFQ1RFRDogbnVsbCxcbn0pO1xuXG50eXBlIFNpZ25hbCA9XG4gIHwgdHlwZW9mIFNpZ25hbHMuREVMQVlcbiAgfCB0eXBlb2YgU2lnbmFscy5SRVNQT05ERVJfR1JBTlRcbiAgfCB0eXBlb2YgU2lnbmFscy5SRVNQT05ERVJfUkVMRUFTRVxuICB8IHR5cGVvZiBTaWduYWxzLlJFU1BPTkRFUl9URVJNSU5BVEVEXG4gIHwgdHlwZW9mIFNpZ25hbHMuRU5URVJfUFJFU1NfUkVDVFxuICB8IHR5cGVvZiBTaWduYWxzLkxFQVZFX1BSRVNTX1JFQ1RcbiAgfCB0eXBlb2YgU2lnbmFscy5MT05HX1BSRVNTX0RFVEVDVEVEO1xuXG4vKipcbiAqIE1hcHBpbmcgZnJvbSBTdGF0ZXMgeCBTaWduYWxzID0+IFN0YXRlc1xuICovXG5jb25zdCBUcmFuc2l0aW9ucyA9IHtcbiAgTk9UX1JFU1BPTkRFUjoge1xuICAgIERFTEFZOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5FUlJPUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuRVJST1IsXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLkVSUk9SLFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5FUlJPUixcbiAgfSxcbiAgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOOiB7XG4gICAgREVMQVk6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVQ6IHtcbiAgICBERUxBWTogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VULFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU46IHtcbiAgICBERUxBWTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU4sXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU4sXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUOiB7XG4gICAgREVMQVk6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfR1JBTlQ6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjoge1xuICAgIERFTEFZOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1JFTEVBU0U6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU4sXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVQ6IHtcbiAgICBERUxBWTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIGVycm9yOiB7XG4gICAgREVMQVk6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICB9LFxufTtcblxuLy8gPT09PSBUeXBpY2FsIENvbnN0YW50cyBmb3IgaW50ZWdyYXRpbmcgaW50byBVSSBjb21wb25lbnRzID09PT1cbi8vIHZhciBISVRfRVhQQU5EX1BYID0gMjA7XG4vLyB2YXIgSElUX1ZFUlRfT0ZGU0VUX1BYID0gMTA7XG5jb25zdCBISUdITElHSFRfREVMQVlfTVMgPSAxMzA7XG5cbmNvbnN0IFBSRVNTX0VYUEFORF9QWCA9IDIwO1xuXG5jb25zdCBMT05HX1BSRVNTX1RIUkVTSE9MRCA9IDUwMDtcblxuY29uc3QgTE9OR19QUkVTU19ERUxBWV9NUyA9IExPTkdfUFJFU1NfVEhSRVNIT0xEIC0gSElHSExJR0hUX0RFTEFZX01TO1xuXG5jb25zdCBMT05HX1BSRVNTX0FMTE9XRURfTU9WRU1FTlQgPSAxMDtcblxuLy8gRGVmYXVsdCBhbW91bnQgXCJhY3RpdmVcIiByZWdpb24gcHJvdHJ1ZGVzIGJleW9uZCBib3hcblxuLyoqXG4gKiBCeSBjb252ZW50aW9uLCBtZXRob2RzIHByZWZpeGVkIHdpdGggdW5kZXJzY29yZXMgYXJlIG1lYW50IHRvIGJlIEBwcml2YXRlLFxuICogYW5kIG5vdCBAcHJvdGVjdGVkLiBNaXhlcnMgc2hvdWxkbid0IGFjY2VzcyB0aGVtIC0gbm90IGV2ZW4gdG8gcHJvdmlkZSB0aGVtXG4gKiBhcyBjYWxsYmFjayBoYW5kbGVycy5cbiAqXG4gKlxuICogPT09PT09PT09PSBHZW9tZXRyeSA9PT09PT09PT1cbiAqIGBUb3VjaGFibGVgIG9ubHkgYXNzdW1lcyB0aGF0IHRoZXJlIGV4aXN0cyBhIGBIaXRSZWN0YCBub2RlLiBUaGUgYFByZXNzUmVjdGBcbiAqIGlzIGFuIGFic3RyYWN0IGJveCB0aGF0IGlzIGV4dGVuZGVkIGJleW9uZCB0aGUgYEhpdFJlY3RgLlxuICpcbiAqICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgfCAtIFwiU3RhcnRcIiBldmVudHMgaW4gYEhpdFJlY3RgIGNhdXNlIGBIaXRSZWN0YFxuICogIHwgICstLS0tLS0tLS0tLS0tLS0tLS0tLSsgIHwgICB0byBiZWNvbWUgdGhlIHJlc3BvbmRlci5cbiAqICB8ICB8ICArLS0tLS0tLS0tLS0tLS0rICB8ICB8IC0gYEhpdFJlY3RgIGlzIHR5cGljYWxseSBleHBhbmRlZCBhcm91bmRcbiAqICB8ICB8ICB8ICAgICAgICAgICAgICB8ICB8ICB8ICAgdGhlIGBWaXN1YWxSZWN0YCwgYnV0IHNoaWZ0ZWQgZG93bndhcmQuXG4gKiAgfCAgfCAgfCAgVmlzdWFsUmVjdCAgfCAgfCAgfCAtIEFmdGVyIHByZXNzaW5nIGRvd24sIGFmdGVyIHNvbWUgZGVsYXksXG4gKiAgfCAgfCAgfCAgICAgICAgICAgICAgfCAgfCAgfCAgIGFuZCBiZWZvcmUgbGV0dGluZyB1cCwgdGhlIFZpc3VhbCBSZWFjdFxuICogIHwgIHwgICstLS0tLS0tLS0tLS0tLSsgIHwgIHwgICB3aWxsIGJlY29tZSBcImFjdGl2ZVwiLiBUaGlzIG1ha2VzIGl0IGVsaWdpYmxlXG4gKiAgfCAgfCAgICAgSGl0UmVjdCAgICAgICAgfCAgfCAgIGZvciBiZWluZyBoaWdobGlnaHRlZCAoc28gbG9uZyBhcyB0aGVcbiAqICB8ICArLS0tLS0tLS0tLS0tLS0tLS0tLS0rICB8ICAgcHJlc3MgcmVtYWlucyBpbiB0aGUgYFByZXNzUmVjdGApLlxuICogIHwgICAgICAgIFByZXNzUmVjdCAgICAgbyAgIHxcbiAqICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0rXG4gKiAgICAgICAgICAgT3V0IFJlZ2lvbiAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0rIFRoaXMgZ2FwIGJldHdlZW4gdGhlIGBIaXRSZWN0YCBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFByZXNzUmVjdGAgYWxsb3dzIGEgdG91Y2ggdG8gbW92ZSBmYXIgYXdheVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tIHRoZSBvcmlnaW5hbCBoaXQgcmVjdCwgYW5kIHJlbWFpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZCwgYW5kIGVsaWdpYmxlIGZvciBhIFwiUHJlc3NcIi5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3VzdG9taXplIHRoaXMgdmlhXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQoKWAuXG4gKlxuICpcbiAqXG4gKiA9PT09PT09IFN0YXRlIE1hY2hpbmUgPT09PT09PVxuICpcbiAqICstLS0tLS0tLS0tLS0tKyA8LS0tKyBSRVNQT05ERVJfUkVMRUFTRVxuICogfE5PVF9SRVNQT05ERVJ8XG4gKiArLS0tLS0tLS0tLS0tLSsgPC0tLSsgUkVTUE9OREVSX1RFUk1JTkFURURcbiAqICAgICArXG4gKiAgICAgfCBSRVNQT05ERVJfR1JBTlQgKEhpdFJlY3QpXG4gKiAgICAgdlxuICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgIERFTEFZICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICBUICsgREVMQVkgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKiB8UkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOfCstLS0tLS0tLT58UkVTUE9OREVSX0FDVElWRV9QUkVTU19JTnwgKy0tLS0tLS0tLS0tLT4gfFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTnxcbiAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICogICAgICsgICAgICAgICAgICBeICAgICAgICAgICAgICAgICAgICAgICAgICsgICAgICAgICAgIF4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICAgICAgICAgICBeXG4gKiAgICAgfExFQVZFXyAgICAgIHxFTlRFUl8gICAgICAgICAgICAgICAgICAgfExFQVZFXyAgICAgfEVOVEVSXyAgICAgICAgICAgICAgICAgICAgICAgICAgIHxMRUFWRV8gICAgIHxFTlRFUl9cbiAqICAgICB8UFJFU1NfUkVDVCAgfFBSRVNTX1JFQ1QgICAgICAgICAgICAgICB8UFJFU1NfUkVDVCB8UFJFU1NfUkVDVCAgICAgICAgICAgICAgICAgICAgICAgfFBSRVNTX1JFQ1QgfFBSRVNTX1JFQ1RcbiAqICAgICB8ICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgfFxuICogICAgIHYgICAgICAgICAgICArICAgICAgICAgICAgICAgICAgICAgICAgIHYgICAgICAgICAgICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ICAgICAgICAgICArXG4gKiArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgIERFTEFZICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKiB8UkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVHwrLS0tLS0tLT58UkVTUE9OREVSX0FDVElWRV9QUkVTU19PVVR8ICAgICAgICAgICAgICAgfFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVR8XG4gKiArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKlxuICogVCArIERFTEFZID0+IExPTkdfUFJFU1NfREVMQVlfTVMgKyBERUxBWVxuICpcbiAqIE5vdCBkcmF3biBhcmUgdGhlIHNpZGUgZWZmZWN0cyBvZiBlYWNoIHRyYW5zaXRpb24uIFRoZSBtb3N0IGltcG9ydGFudCBzaWRlXG4gKiBlZmZlY3QgaXMgdGhlIGB0b3VjaGFibGVIYW5kbGVQcmVzc2AgYWJzdHJhY3QgbWV0aG9kIGludm9jYXRpb24gdGhhdCBvY2N1cnNcbiAqIHdoZW4gYSByZXNwb25kZXIgaXMgcmVsZWFzZWQgd2hpbGUgaW4gZWl0aGVyIG9mIHRoZSBcIlByZXNzXCIgc3RhdGVzLlxuICpcbiAqIFRoZSBvdGhlciBpbXBvcnRhbnQgc2lkZSBlZmZlY3RzIGFyZSB0aGUgaGlnaGxpZ2h0IGFic3RyYWN0IG1ldGhvZFxuICogaW52b2NhdGlvbnMgKGludGVybmFsIGNhbGxiYWNrcykgdG8gYmUgaW1wbGVtZW50ZWQgYnkgdGhlIG1peGVyLlxuICpcbiAqXG4gKiBAbGVuZHMgVG91Y2hhYmxlLnByb3RvdHlwZVxuICovXG5jb25zdCBUb3VjaGFibGVNaXhpbiA9IHtcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghUGxhdGZvcm0uaXNUVikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3R2RXZlbnRIYW5kbGVyID0gbmV3IFRWRXZlbnRIYW5kbGVyKCk7XG4gICAgdGhpcy5fdHZFdmVudEhhbmRsZXIuZW5hYmxlKHRoaXMsIGZ1bmN0aW9uKGNtcCwgZXZ0KSB7XG4gICAgICBjb25zdCBteVRhZyA9IFJlYWN0TmF0aXZlLmZpbmROb2RlSGFuZGxlKGNtcCk7XG4gICAgICBldnQuZGlzcGF0Y2hDb25maWcgPSB7fTtcbiAgICAgIGlmIChteVRhZyA9PT0gZXZ0LnRhZykge1xuICAgICAgICBpZiAoZXZ0LmV2ZW50VHlwZSA9PT0gJ2ZvY3VzJykge1xuICAgICAgICAgIGNtcC50b3VjaGFibGVIYW5kbGVGb2N1cyhldnQpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2dC5ldmVudFR5cGUgPT09ICdibHVyJykge1xuICAgICAgICAgIGNtcC50b3VjaGFibGVIYW5kbGVCbHVyKGV2dCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZ0LmV2ZW50VHlwZSA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgICAgICBjbXAudG91Y2hhYmxlSGFuZGxlUHJlc3MgJiZcbiAgICAgICAgICAgICFjbXAucHJvcHMuZGlzYWJsZWQgJiZcbiAgICAgICAgICAgIGNtcC50b3VjaGFibGVIYW5kbGVQcmVzcyhldnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCB0aW1lb3V0cyBvbiB1bm1vdW50XG4gICAqL1xuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3R2RXZlbnRIYW5kbGVyKSB7XG4gICAgICB0aGlzLl90dkV2ZW50SGFuZGxlci5kaXNhYmxlKCk7XG4gICAgICBkZWxldGUgdGhpcy5fdHZFdmVudEhhbmRsZXI7XG4gICAgfVxuICAgIHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCk7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0KTtcbiAgfSxcblxuICAvKipcbiAgICogSXQncyBwcmVmZXIgdGhhdCBtaXhpbnMgZGV0ZXJtaW5lIHN0YXRlIGluIHRoaXMgd2F5LCBoYXZpbmcgdGhlIGNsYXNzXG4gICAqIGV4cGxpY2l0bHkgbWl4IHRoZSBzdGF0ZSBpbiB0aGUgb25lIGFuZCBvbmx5IGBnZXRJbml0aWFsU3RhdGVgIG1ldGhvZC5cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fSBTdGF0ZSBvYmplY3QgdG8gYmUgcGxhY2VkIGluc2lkZSBvZlxuICAgKiBgdGhpcy5zdGF0ZS50b3VjaGFibGVgLlxuICAgKi9cbiAgdG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG91Y2hhYmxlOiB7dG91Y2hTdGF0ZTogdW5kZWZpbmVkLCByZXNwb25kZXJJRDogbnVsbH0sXG4gICAgfTtcbiAgfSxcblxuICAvLyA9PT09IEhvb2tzIHRvIEdlc3R1cmUgUmVzcG9uZGVyIHN5c3RlbSA9PT09XG4gIC8qKlxuICAgKiBNdXN0IHJldHVybiB0cnVlIGlmIGVtYmVkZGVkIGluIGEgbmF0aXZlIHBsYXRmb3JtIHNjcm9sbCB2aWV3LlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gIXRoaXMucHJvcHMucmVqZWN0UmVzcG9uZGVyVGVybWluYXRpb247XG4gIH0sXG5cbiAgLyoqXG4gICAqIE11c3QgcmV0dXJuIHRydWUgdG8gc3RhcnQgdGhlIHByb2Nlc3Mgb2YgYFRvdWNoYWJsZWAuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICF0aGlzLnByb3BzLmRpc2FibGVkO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdHJ1ZSB0byBjYW5jZWwgcHJlc3Mgb24gbG9uZyBwcmVzcy5cbiAgICovXG4gIHRvdWNoYWJsZUxvbmdQcmVzc0NhbmNlbHNQcmVzczogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBsYWNlIGFzIGNhbGxiYWNrIGZvciBhIERPTSBlbGVtZW50J3MgYG9uUmVzcG9uZGVyR3JhbnRgIGV2ZW50LlxuICAgKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBlIFN5bnRoZXRpYyBldmVudCBmcm9tIGV2ZW50IHN5c3RlbS5cbiAgICpcbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlckdyYW50OiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgY29uc3QgZGlzcGF0Y2hJRCA9IGUuY3VycmVudFRhcmdldDtcbiAgICAvLyBTaW5jZSBlIGlzIHVzZWQgaW4gYSBjYWxsYmFjayBpbnZva2VkIG9uIGFub3RoZXIgZXZlbnQgbG9vcFxuICAgIC8vIChhcyBpbiBzZXRUaW1lb3V0IGV0YyksIHdlIG5lZWQgdG8gY2FsbCBlLnBlcnNpc3QoKSBvbiB0aGVcbiAgICAvLyBldmVudCB0byBtYWtlIHN1cmUgaXQgZG9lc24ndCBnZXQgcmV1c2VkIGluIHRoZSBldmVudCBvYmplY3QgcG9vbC5cbiAgICBlLnBlcnNpc3QoKTtcblxuICAgIHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQpO1xuICAgIHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQgPSBudWxsO1xuXG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZSA9IFN0YXRlcy5OT1RfUkVTUE9OREVSO1xuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLnJlc3BvbmRlcklEID0gZGlzcGF0Y2hJRDtcbiAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuUkVTUE9OREVSX0dSQU5ULCBlKTtcbiAgICBsZXQgZGVsYXlNUyA9XG4gICAgICB0aGlzLnRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVMgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IE1hdGgubWF4KHRoaXMudG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUygpLCAwKVxuICAgICAgICA6IEhJR0hMSUdIVF9ERUxBWV9NUztcbiAgICBkZWxheU1TID0gaXNOYU4oZGVsYXlNUykgPyBISUdITElHSFRfREVMQVlfTVMgOiBkZWxheU1TO1xuICAgIGlmIChkZWxheU1TICE9PSAwKSB7XG4gICAgICB0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCA9IHNldFRpbWVvdXQoXG4gICAgICAgIHRoaXMuX2hhbmRsZURlbGF5LmJpbmQodGhpcywgZSksXG4gICAgICAgIGRlbGF5TVMsXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxheShlKTtcbiAgICB9XG5cbiAgICBsZXQgbG9uZ0RlbGF5TVMgPVxuICAgICAgdGhpcy50b3VjaGFibGVHZXRMb25nUHJlc3NEZWxheU1TICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBNYXRoLm1heCh0aGlzLnRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVMoKSwgMTApXG4gICAgICAgIDogTE9OR19QUkVTU19ERUxBWV9NUztcbiAgICBsb25nRGVsYXlNUyA9IGlzTmFOKGxvbmdEZWxheU1TKSA/IExPTkdfUFJFU1NfREVMQVlfTVMgOiBsb25nRGVsYXlNUztcbiAgICB0aGlzLmxvbmdQcmVzc0RlbGF5VGltZW91dCA9IHNldFRpbWVvdXQoXG4gICAgICB0aGlzLl9oYW5kbGVMb25nRGVsYXkuYmluZCh0aGlzLCBlKSxcbiAgICAgIGxvbmdEZWxheU1TICsgZGVsYXlNUyxcbiAgICApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQbGFjZSBhcyBjYWxsYmFjayBmb3IgYSBET00gZWxlbWVudCdzIGBvblJlc3BvbmRlclJlbGVhc2VgIGV2ZW50LlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZTogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5SRVNQT05ERVJfUkVMRUFTRSwgZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBsYWNlIGFzIGNhbGxiYWNrIGZvciBhIERPTSBlbGVtZW50J3MgYG9uUmVzcG9uZGVyVGVybWluYXRlYCBldmVudC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZTogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5SRVNQT05ERVJfVEVSTUlOQVRFRCwgZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBsYWNlIGFzIGNhbGxiYWNrIGZvciBhIERPTSBlbGVtZW50J3MgYG9uUmVzcG9uZGVyTW92ZWAgZXZlbnQuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlOiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgLy8gTWVhc3VyZW1lbnQgbWF5IG5vdCBoYXZlIHJldHVybmVkIHlldC5cbiAgICBpZiAoIXRoaXMuc3RhdGUudG91Y2hhYmxlLnBvc2l0aW9uT25BY3RpdmF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBvc2l0aW9uT25BY3RpdmF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnBvc2l0aW9uT25BY3RpdmF0ZTtcbiAgICBjb25zdCBkaW1lbnNpb25zT25BY3RpdmF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlO1xuICAgIGNvbnN0IHByZXNzUmVjdE9mZnNldCA9IHRoaXMudG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0XG4gICAgICA/IHRoaXMudG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0KClcbiAgICAgIDoge1xuICAgICAgICAgIGxlZnQ6IFBSRVNTX0VYUEFORF9QWCxcbiAgICAgICAgICByaWdodDogUFJFU1NfRVhQQU5EX1BYLFxuICAgICAgICAgIHRvcDogUFJFU1NfRVhQQU5EX1BYLFxuICAgICAgICAgIGJvdHRvbTogUFJFU1NfRVhQQU5EX1BYLFxuICAgICAgICB9O1xuXG4gICAgbGV0IHByZXNzRXhwYW5kTGVmdCA9IHByZXNzUmVjdE9mZnNldC5sZWZ0O1xuICAgIGxldCBwcmVzc0V4cGFuZFRvcCA9IHByZXNzUmVjdE9mZnNldC50b3A7XG4gICAgbGV0IHByZXNzRXhwYW5kUmlnaHQgPSBwcmVzc1JlY3RPZmZzZXQucmlnaHQ7XG4gICAgbGV0IHByZXNzRXhwYW5kQm90dG9tID0gcHJlc3NSZWN0T2Zmc2V0LmJvdHRvbTtcblxuICAgIGNvbnN0IGhpdFNsb3AgPSB0aGlzLnRvdWNoYWJsZUdldEhpdFNsb3BcbiAgICAgID8gdGhpcy50b3VjaGFibGVHZXRIaXRTbG9wKClcbiAgICAgIDogbnVsbDtcblxuICAgIGlmIChoaXRTbG9wKSB7XG4gICAgICBwcmVzc0V4cGFuZExlZnQgKz0gaGl0U2xvcC5sZWZ0IHx8IDA7XG4gICAgICBwcmVzc0V4cGFuZFRvcCArPSBoaXRTbG9wLnRvcCB8fCAwO1xuICAgICAgcHJlc3NFeHBhbmRSaWdodCArPSBoaXRTbG9wLnJpZ2h0IHx8IDA7XG4gICAgICBwcmVzc0V4cGFuZEJvdHRvbSArPSBoaXRTbG9wLmJvdHRvbSB8fCAwO1xuICAgIH1cblxuICAgIGNvbnN0IHRvdWNoID0gZXh0cmFjdFNpbmdsZVRvdWNoKGUubmF0aXZlRXZlbnQpO1xuICAgIGNvbnN0IHBhZ2VYID0gdG91Y2ggJiYgdG91Y2gucGFnZVg7XG4gICAgY29uc3QgcGFnZVkgPSB0b3VjaCAmJiB0b3VjaC5wYWdlWTtcblxuICAgIGlmICh0aGlzLnByZXNzSW5Mb2NhdGlvbikge1xuICAgICAgY29uc3QgbW92ZWREaXN0YW5jZSA9IHRoaXMuX2dldERpc3RhbmNlQmV0d2VlblBvaW50cyhcbiAgICAgICAgcGFnZVgsXG4gICAgICAgIHBhZ2VZLFxuICAgICAgICB0aGlzLnByZXNzSW5Mb2NhdGlvbi5wYWdlWCxcbiAgICAgICAgdGhpcy5wcmVzc0luTG9jYXRpb24ucGFnZVksXG4gICAgICApO1xuICAgICAgaWYgKG1vdmVkRGlzdGFuY2UgPiBMT05HX1BSRVNTX0FMTE9XRURfTU9WRU1FTlQpIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsTG9uZ1ByZXNzRGVsYXlUaW1lb3V0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaXNUb3VjaFdpdGhpbkFjdGl2ZSA9XG4gICAgICBwYWdlWCA+IHBvc2l0aW9uT25BY3RpdmF0ZS5sZWZ0IC0gcHJlc3NFeHBhbmRMZWZ0ICYmXG4gICAgICBwYWdlWSA+IHBvc2l0aW9uT25BY3RpdmF0ZS50b3AgLSBwcmVzc0V4cGFuZFRvcCAmJlxuICAgICAgcGFnZVggPFxuICAgICAgICBwb3NpdGlvbk9uQWN0aXZhdGUubGVmdCArXG4gICAgICAgICAgZGltZW5zaW9uc09uQWN0aXZhdGUud2lkdGggK1xuICAgICAgICAgIHByZXNzRXhwYW5kUmlnaHQgJiZcbiAgICAgIHBhZ2VZIDxcbiAgICAgICAgcG9zaXRpb25PbkFjdGl2YXRlLnRvcCArXG4gICAgICAgICAgZGltZW5zaW9uc09uQWN0aXZhdGUuaGVpZ2h0ICtcbiAgICAgICAgICBwcmVzc0V4cGFuZEJvdHRvbTtcbiAgICBpZiAoaXNUb3VjaFdpdGhpbkFjdGl2ZSkge1xuICAgICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLkVOVEVSX1BSRVNTX1JFQ1QsIGUpO1xuICAgICAgY29uc3QgY3VyU3RhdGUgPSB0aGlzLnN0YXRlLnRvdWNoYWJsZS50b3VjaFN0YXRlO1xuICAgICAgaWYgKGN1clN0YXRlID09PSBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOKSB7XG4gICAgICAgIC8vIGZpeCBmb3IgdDc5Njc0MjBcbiAgICAgICAgdGhpcy5fY2FuY2VsTG9uZ1ByZXNzRGVsYXlUaW1lb3V0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dCgpO1xuICAgICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLkxFQVZFX1BSRVNTX1JFQ1QsIGUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIHJlY2VpdmVzIGZvY3VzLiBNaXhlcnMgbWlnaHQgb3ZlcnJpZGUgdGhpcyB0b1xuICAgKiB2aXN1YWxseSBkaXN0aW5ndWlzaCB0aGUgYFZpc3VhbFJlY3RgIHNvIHRoYXQgdGhlIHVzZXIga25vd3MgdGhhdCBpdFxuICAgKiBjdXJyZW50bHkgaGFzIHRoZSBmb2N1cy4gTW9zdCBwbGF0Zm9ybXMgb25seSBzdXBwb3J0IGEgc2luZ2xlIGVsZW1lbnQgYmVpbmdcbiAgICogZm9jdXNlZCBhdCBhIHRpbWUsIGluIHdoaWNoIGNhc2UgdGhlcmUgbWF5IGhhdmUgYmVlbiBhIHByZXZpb3VzbHkgZm9jdXNlZFxuICAgKiBlbGVtZW50IHRoYXQgd2FzIGJsdXJyZWQganVzdCBwcmlvciB0byB0aGlzLiBUaGlzIGNhbiBiZSBvdmVycmlkZGVuIHdoZW5cbiAgICogdXNpbmcgYFRvdWNoYWJsZS5NaXhpbi53aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1cmAuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVGb2N1czogZnVuY3Rpb24oZTogRXZlbnQpIHtcbiAgICB0aGlzLnByb3BzLm9uRm9jdXMgJiYgdGhpcy5wcm9wcy5vbkZvY3VzKGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGl0ZW0gbG9zZXMgZm9jdXMuIE1peGVycyBtaWdodCBvdmVycmlkZSB0aGlzIHRvXG4gICAqIHZpc3VhbGx5IGRpc3Rpbmd1aXNoIHRoZSBgVmlzdWFsUmVjdGAgc28gdGhhdCB0aGUgdXNlciBrbm93cyB0aGF0IGl0XG4gICAqIG5vIGxvbmdlciBoYXMgZm9jdXMuIE1vc3QgcGxhdGZvcm1zIG9ubHkgc3VwcG9ydCBhIHNpbmdsZSBlbGVtZW50IGJlaW5nXG4gICAqIGZvY3VzZWQgYXQgYSB0aW1lLCBpbiB3aGljaCBjYXNlIHRoZSBmb2N1cyBtYXkgaGF2ZSBtb3ZlZCB0byBhbm90aGVyLlxuICAgKiBUaGlzIGNhbiBiZSBvdmVycmlkZGVuIHdoZW4gdXNpbmdcbiAgICogYFRvdWNoYWJsZS5NaXhpbi53aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1cmAuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVCbHVyOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25CbHVyICYmIHRoaXMucHJvcHMub25CbHVyKGUpO1xuICB9LFxuXG4gIC8vID09PT0gQWJzdHJhY3QgQXBwbGljYXRpb24gQ2FsbGJhY2tzID09PT1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIHNob3VsZCBiZSBoaWdobGlnaHRlZC4gTWl4ZXJzIHNob3VsZCBpbXBsZW1lbnQgdGhpc1xuICAgKiB0byB2aXN1YWxseSBkaXN0aW5ndWlzaCB0aGUgYFZpc3VhbFJlY3RgIHNvIHRoYXQgdGhlIHVzZXIga25vd3MgdGhhdFxuICAgKiByZWxlYXNpbmcgYSB0b3VjaCB3aWxsIHJlc3VsdCBpbiBhIFwic2VsZWN0aW9uXCIgKGFuYWxvZyB0byBjbGljaykuXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKiB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luOiBmdW5jdGlvbixcbiAgICovXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgaXRlbSBpcyBcImFjdGl2ZVwiIChpbiB0aGF0IGl0IGlzIHN0aWxsIGVsaWdpYmxlIHRvIGJlY29tZVxuICAgKiBhIFwic2VsZWN0XCIpIGJ1dCB0aGUgdG91Y2ggaGFzIGxlZnQgdGhlIGBQcmVzc1JlY3RgLiBVc3VhbGx5IHRoZSBtaXhlciB3aWxsXG4gICAqIHdhbnQgdG8gdW5oaWdobGlnaHQgdGhlIGBWaXN1YWxSZWN0YC4gSWYgdGhlIHVzZXIgKHdoaWxlIHByZXNzaW5nKSBtb3Zlc1xuICAgKiBiYWNrIGludG8gdGhlIGBQcmVzc1JlY3RgIGB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luYCB3aWxsIGJlIGludm9rZWRcbiAgICogYWdhaW4gYW5kIHRoZSBtaXhlciBzaG91bGQgcHJvYmFibHkgaGlnaGxpZ2h0IHRoZSBgVmlzdWFsUmVjdGAgYWdhaW4uIFRoaXNcbiAgICogZXZlbnQgd2lsbCBub3QgZmlyZSBvbiBhbiBgdG91Y2hFbmQvbW91c2VVcGAgZXZlbnQsIG9ubHkgbW92ZSBldmVudHMgd2hpbGVcbiAgICogdGhlIHVzZXIgaXMgZGVwcmVzc2luZyB0aGUgbW91c2UvdG91Y2guXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKiB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dDogZnVuY3Rpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgaXRlbSBpcyBcInNlbGVjdGVkXCIgLSBtZWFuaW5nIHRoZSBpbnRlcmFjdGlvbiBlbmRlZCBieVxuICAgKiBsZXR0aW5nIHVwIHdoaWxlIHRoZSBpdGVtIHdhcyBlaXRoZXIgaW4gdGhlIHN0YXRlXG4gICAqIGBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOYCBvciBgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOYC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZVByZXNzOiBmdW5jdGlvblxuICAgKi9cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIGlzIGxvbmcgcHJlc3NlZCAtIG1lYW5pbmcgdGhlIGludGVyYWN0aW9uIGVuZGVkIGJ5XG4gICAqIGxldHRpbmcgdXAgd2hpbGUgdGhlIGl0ZW0gd2FzIGluIGBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU5gLiBJZlxuICAgKiBgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzYCBpcyAqbm90KiBwcm92aWRlZCwgYHRvdWNoYWJsZUhhbmRsZVByZXNzYCB3aWxsXG4gICAqIGJlIGNhbGxlZCBhcyBpdCBub3JtYWxseSBpcy4gSWYgYHRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzc2AgaXMgcHJvdmlkZWQsIGJ5XG4gICAqIGRlZmF1bHQgYW55IGB0b3VjaGFibGVIYW5kbGVQcmVzc2AgY2FsbGJhY2sgd2lsbCBub3QgYmUgaW52b2tlZC4gVG9cbiAgICogb3ZlcnJpZGUgdGhpcyBkZWZhdWx0IGJlaGF2aW9yLCBvdmVycmlkZSBgdG91Y2hhYmxlTG9uZ1ByZXNzQ2FuY2Vsc1ByZXNzYFxuICAgKiB0byByZXR1cm4gZmFsc2UuIEFzIGEgcmVzdWx0LCBgdG91Y2hhYmxlSGFuZGxlUHJlc3NgIHdpbGwgYmUgY2FsbGVkIHdoZW5cbiAgICogbGlmdGluZyB1cCwgZXZlbiBpZiBgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzYCBoYXMgYWxzbyBiZWVuIGNhbGxlZC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzczogZnVuY3Rpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBtaWxsaXMgdG8gd2FpdCBiZWZvcmUgdHJpZ2dlcmluZyBhIGhpZ2hsaWdodC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVM6IGZ1bmN0aW9uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhbW91bnQgdG8gZXh0ZW5kIHRoZSBgSGl0UmVjdGAgaW50byB0aGUgYFByZXNzUmVjdGAuIFBvc2l0aXZlXG4gICAqIG51bWJlcnMgbWVhbiB0aGUgc2l6ZSBleHBhbmRzIG91dHdhcmRzLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICogdG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0OiBmdW5jdGlvblxuICAgKi9cblxuICAvLyA9PT09IEludGVybmFsIExvZ2ljID09PT1cblxuICAvKipcbiAgICogTWVhc3VyZXMgdGhlIGBIaXRSZWN0YCBub2RlIG9uIGFjdGl2YXRpb24uIFRoZSBCb3VuZGluZyByZWN0YW5nbGUgaXMgd2l0aFxuICAgKiByZXNwZWN0IHRvIHZpZXdwb3J0IC0gbm90IHBhZ2UsIHNvIGFkZGluZyB0aGUgYHBhZ2VYT2Zmc2V0L3BhZ2VZT2Zmc2V0YFxuICAgKiBzaG91bGQgcmVzdWx0IGluIHBvaW50cyB0aGF0IGFyZSBpbiB0aGUgc2FtZSBjb29yZGluYXRlIHN5c3RlbSBhcyBhblxuICAgKiBldmVudCdzIGBnbG9iYWxYL2dsb2JhbFlgIGRhdGEgdmFsdWVzLlxuICAgKlxuICAgKiAtIENvbnNpZGVyIGNhY2hpbmcgdGhpcyBmb3IgdGhlIGxpZmV0aW1lIG9mIHRoZSBjb21wb25lbnQsIG9yIHBvc3NpYmx5XG4gICAqICAgYmVpbmcgYWJsZSB0byBzaGFyZSB0aGlzIGNhY2hlIGJldHdlZW4gYW55IGBTY3JvbGxNYXBgIHZpZXcuXG4gICAqXG4gICAqIEBzaWRlZWZmZWN0c1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3JlbWVhc3VyZU1ldHJpY3NPbkFjdGl2YXRpb246IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHRhZyA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnJlc3BvbmRlcklEO1xuICAgIGlmICh0YWcgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIFVJTWFuYWdlci5tZWFzdXJlKHRhZywgdGhpcy5faGFuZGxlUXVlcnlMYXlvdXQpO1xuICB9LFxuXG4gIF9oYW5kbGVRdWVyeUxheW91dDogZnVuY3Rpb24oXG4gICAgbDogbnVtYmVyLFxuICAgIHQ6IG51bWJlcixcbiAgICB3OiBudW1iZXIsXG4gICAgaDogbnVtYmVyLFxuICAgIGdsb2JhbFg6IG51bWJlcixcbiAgICBnbG9iYWxZOiBudW1iZXIsXG4gICkge1xuICAgIC8vZG9uJ3QgZG8gYW55dGhpbmcgVUlNYW5hZ2VyIGZhaWxlZCB0byBtZWFzdXJlIG5vZGVcbiAgICBpZiAoIWwgJiYgIXQgJiYgIXcgJiYgIWggJiYgIWdsb2JhbFggJiYgIWdsb2JhbFkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUucG9zaXRpb25PbkFjdGl2YXRlICYmXG4gICAgICBQb3NpdGlvbi5yZWxlYXNlKHRoaXMuc3RhdGUudG91Y2hhYmxlLnBvc2l0aW9uT25BY3RpdmF0ZSk7XG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUuZGltZW5zaW9uc09uQWN0aXZhdGUgJiZcbiAgICAgIEJvdW5kaW5nRGltZW5zaW9ucy5yZWxlYXNlKHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlKTtcbiAgICB0aGlzLnN0YXRlLnRvdWNoYWJsZS5wb3NpdGlvbk9uQWN0aXZhdGUgPSBQb3NpdGlvbi5nZXRQb29sZWQoXG4gICAgICBnbG9iYWxYLFxuICAgICAgZ2xvYmFsWSxcbiAgICApO1xuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlID0gQm91bmRpbmdEaW1lbnNpb25zLmdldFBvb2xlZChcbiAgICAgIHcsXG4gICAgICBoLFxuICAgICk7XG4gIH0sXG5cbiAgX2hhbmRsZURlbGF5OiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQgPSBudWxsO1xuICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5ERUxBWSwgZSk7XG4gIH0sXG5cbiAgX2hhbmRsZUxvbmdEZWxheTogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0ID0gbnVsbDtcbiAgICBjb25zdCBjdXJTdGF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGU7XG4gICAgaWYgKFxuICAgICAgY3VyU3RhdGUgIT09IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOICYmXG4gICAgICBjdXJTdGF0ZSAhPT0gU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTlxuICAgICkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ0F0dGVtcHRlZCB0byB0cmFuc2l0aW9uIGZyb20gc3RhdGUgYCcgK1xuICAgICAgICAgIGN1clN0YXRlICtcbiAgICAgICAgICAnYCB0byBgJyArXG4gICAgICAgICAgU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTiArXG4gICAgICAgICAgJ2AsIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIFRoaXMgaXMgJyArXG4gICAgICAgICAgJ21vc3QgbGlrZWx5IGR1ZSB0byBgVG91Y2hhYmxlLmxvbmdQcmVzc0RlbGF5VGltZW91dGAgbm90IGJlaW5nIGNhbmNlbGxlZC4nLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLkxPTkdfUFJFU1NfREVURUNURUQsIGUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjZWl2ZXMgYSBzdGF0ZSBtYWNoaW5lIHNpZ25hbCwgcGVyZm9ybXMgc2lkZSBlZmZlY3RzIG9mIHRoZSB0cmFuc2l0aW9uXG4gICAqIGFuZCBzdG9yZXMgdGhlIG5ldyBzdGF0ZS4gVmFsaWRhdGVzIHRoZSB0cmFuc2l0aW9uIGFzIHdlbGwuXG4gICAqXG4gICAqIEBwYXJhbSB7U2lnbmFsc30gc2lnbmFsIFN0YXRlIG1hY2hpbmUgc2lnbmFsLlxuICAgKiBAdGhyb3dzIEVycm9yIGlmIGludmFsaWQgc3RhdGUgdHJhbnNpdGlvbiBvciB1bnJlY29nbml6ZWQgc2lnbmFsLlxuICAgKiBAc2lkZWVmZmVjdHNcbiAgICovXG4gIF9yZWNlaXZlU2lnbmFsOiBmdW5jdGlvbihzaWduYWw6IFNpZ25hbCwgZTogUHJlc3NFdmVudCkge1xuICAgIGNvbnN0IHJlc3BvbmRlcklEID0gdGhpcy5zdGF0ZS50b3VjaGFibGUucmVzcG9uZGVySUQ7XG4gICAgY29uc3QgY3VyU3RhdGUgPSB0aGlzLnN0YXRlLnRvdWNoYWJsZS50b3VjaFN0YXRlO1xuICAgIGNvbnN0IG5leHRTdGF0ZSA9IFRyYW5zaXRpb25zW2N1clN0YXRlXSAmJiBUcmFuc2l0aW9uc1tjdXJTdGF0ZV1bc2lnbmFsXTtcbiAgICBpZiAoIXJlc3BvbmRlcklEICYmIHNpZ25hbCA9PT0gU2lnbmFscy5SRVNQT05ERVJfUkVMRUFTRSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIW5leHRTdGF0ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVW5yZWNvZ25pemVkIHNpZ25hbCBgJyArXG4gICAgICAgICAgc2lnbmFsICtcbiAgICAgICAgICAnYCBvciBzdGF0ZSBgJyArXG4gICAgICAgICAgY3VyU3RhdGUgK1xuICAgICAgICAgICdgIGZvciBUb3VjaGFibGUgcmVzcG9uZGVyIGAnICtcbiAgICAgICAgICByZXNwb25kZXJJRCArXG4gICAgICAgICAgJ2AnLFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKG5leHRTdGF0ZSA9PT0gU3RhdGVzLkVSUk9SKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdUb3VjaGFibGUgY2Fubm90IHRyYW5zaXRpb24gZnJvbSBgJyArXG4gICAgICAgICAgY3VyU3RhdGUgK1xuICAgICAgICAgICdgIHRvIGAnICtcbiAgICAgICAgICBzaWduYWwgK1xuICAgICAgICAgICdgIGZvciByZXNwb25kZXIgYCcgK1xuICAgICAgICAgIHJlc3BvbmRlcklEICtcbiAgICAgICAgICAnYCcsXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoY3VyU3RhdGUgIT09IG5leHRTdGF0ZSkge1xuICAgICAgdGhpcy5fcGVyZm9ybVNpZGVFZmZlY3RzRm9yVHJhbnNpdGlvbihjdXJTdGF0ZSwgbmV4dFN0YXRlLCBzaWduYWwsIGUpO1xuICAgICAgdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICB9XG4gIH0sXG5cbiAgX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLmxvbmdQcmVzc0RlbGF5VGltZW91dCA9IG51bGw7XG4gIH0sXG5cbiAgX2lzSGlnaGxpZ2h0OiBmdW5jdGlvbihzdGF0ZTogU3RhdGUpIHtcbiAgICByZXR1cm4gKFxuICAgICAgc3RhdGUgPT09IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOIHx8XG4gICAgICBzdGF0ZSA9PT0gU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTlxuICAgICk7XG4gIH0sXG5cbiAgX3NhdmVQcmVzc0luTG9jYXRpb246IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICBjb25zdCB0b3VjaCA9IGV4dHJhY3RTaW5nbGVUb3VjaChlLm5hdGl2ZUV2ZW50KTtcbiAgICBjb25zdCBwYWdlWCA9IHRvdWNoICYmIHRvdWNoLnBhZ2VYO1xuICAgIGNvbnN0IHBhZ2VZID0gdG91Y2ggJiYgdG91Y2gucGFnZVk7XG4gICAgY29uc3QgbG9jYXRpb25YID0gdG91Y2ggJiYgdG91Y2gubG9jYXRpb25YO1xuICAgIGNvbnN0IGxvY2F0aW9uWSA9IHRvdWNoICYmIHRvdWNoLmxvY2F0aW9uWTtcbiAgICB0aGlzLnByZXNzSW5Mb2NhdGlvbiA9IHtwYWdlWCwgcGFnZVksIGxvY2F0aW9uWCwgbG9jYXRpb25ZfTtcbiAgfSxcblxuICBfZ2V0RGlzdGFuY2VCZXR3ZWVuUG9pbnRzOiBmdW5jdGlvbihcbiAgICBhWDogbnVtYmVyLFxuICAgIGFZOiBudW1iZXIsXG4gICAgYlg6IG51bWJlcixcbiAgICBiWTogbnVtYmVyLFxuICApIHtcbiAgICBjb25zdCBkZWx0YVggPSBhWCAtIGJYO1xuICAgIGNvbnN0IGRlbHRhWSA9IGFZIC0gYlk7XG4gICAgcmV0dXJuIE1hdGguc3FydChkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBXaWxsIHBlcmZvcm0gYSB0cmFuc2l0aW9uIGJldHdlZW4gdG91Y2hhYmxlIHN0YXRlcywgYW5kIGlkZW50aWZ5IGFueVxuICAgKiBoaWdobGlnaHRpbmcgb3IgdW5oaWdobGlnaHRpbmcgdGhhdCBtdXN0IGJlIHBlcmZvcm1lZCBmb3IgdGhpcyBwYXJ0aWN1bGFyXG4gICAqIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RhdGVzfSBjdXJTdGF0ZSBDdXJyZW50IFRvdWNoYWJsZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtTdGF0ZXN9IG5leHRTdGF0ZSBOZXh0IFRvdWNoYWJsZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtTaWduYWx9IHNpZ25hbCBTaWduYWwgdGhhdCB0cmlnZ2VyZWQgdGhlIHRyYW5zaXRpb24uXG4gICAqIEBwYXJhbSB7RXZlbnR9IGUgTmF0aXZlIGV2ZW50LlxuICAgKiBAc2lkZWVmZmVjdHNcbiAgICovXG4gIF9wZXJmb3JtU2lkZUVmZmVjdHNGb3JUcmFuc2l0aW9uOiBmdW5jdGlvbihcbiAgICBjdXJTdGF0ZTogU3RhdGUsXG4gICAgbmV4dFN0YXRlOiBTdGF0ZSxcbiAgICBzaWduYWw6IFNpZ25hbCxcbiAgICBlOiBQcmVzc0V2ZW50LFxuICApIHtcbiAgICBjb25zdCBjdXJJc0hpZ2hsaWdodCA9IHRoaXMuX2lzSGlnaGxpZ2h0KGN1clN0YXRlKTtcbiAgICBjb25zdCBuZXdJc0hpZ2hsaWdodCA9IHRoaXMuX2lzSGlnaGxpZ2h0KG5leHRTdGF0ZSk7XG5cbiAgICBjb25zdCBpc0ZpbmFsU2lnbmFsID1cbiAgICAgIHNpZ25hbCA9PT0gU2lnbmFscy5SRVNQT05ERVJfVEVSTUlOQVRFRCB8fFxuICAgICAgc2lnbmFsID09PSBTaWduYWxzLlJFU1BPTkRFUl9SRUxFQVNFO1xuXG4gICAgaWYgKGlzRmluYWxTaWduYWwpIHtcbiAgICAgIHRoaXMuX2NhbmNlbExvbmdQcmVzc0RlbGF5VGltZW91dCgpO1xuICAgIH1cblxuICAgIGNvbnN0IGlzSW5pdGlhbFRyYW5zaXRpb24gPVxuICAgICAgY3VyU3RhdGUgPT09IFN0YXRlcy5OT1RfUkVTUE9OREVSICYmXG4gICAgICBuZXh0U3RhdGUgPT09IFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU47XG5cbiAgICBjb25zdCBpc0FjdGl2ZVRyYW5zaXRpb24gPSAhSXNBY3RpdmVbY3VyU3RhdGVdICYmIElzQWN0aXZlW25leHRTdGF0ZV07XG4gICAgaWYgKGlzSW5pdGlhbFRyYW5zaXRpb24gfHwgaXNBY3RpdmVUcmFuc2l0aW9uKSB7XG4gICAgICB0aGlzLl9yZW1lYXN1cmVNZXRyaWNzT25BY3RpdmF0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKElzUHJlc3NpbmdJbltjdXJTdGF0ZV0gJiYgc2lnbmFsID09PSBTaWduYWxzLkxPTkdfUFJFU1NfREVURUNURUQpIHtcbiAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzICYmIHRoaXMudG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzKGUpO1xuICAgIH1cblxuICAgIGlmIChuZXdJc0hpZ2hsaWdodCAmJiAhY3VySXNIaWdobGlnaHQpIHtcbiAgICAgIHRoaXMuX3N0YXJ0SGlnaGxpZ2h0KGUpO1xuICAgIH0gZWxzZSBpZiAoIW5ld0lzSGlnaGxpZ2h0ICYmIGN1cklzSGlnaGxpZ2h0KSB7XG4gICAgICB0aGlzLl9lbmRIaWdobGlnaHQoZSk7XG4gICAgfVxuXG4gICAgaWYgKElzUHJlc3NpbmdJbltjdXJTdGF0ZV0gJiYgc2lnbmFsID09PSBTaWduYWxzLlJFU1BPTkRFUl9SRUxFQVNFKSB7XG4gICAgICBjb25zdCBoYXNMb25nUHJlc3NIYW5kbGVyID0gISF0aGlzLnByb3BzLm9uTG9uZ1ByZXNzO1xuICAgICAgY29uc3QgcHJlc3NJc0xvbmdCdXRTdGlsbENhbGxPblByZXNzID1cbiAgICAgICAgSXNMb25nUHJlc3NpbmdJbltjdXJTdGF0ZV0gJiYgLy8gV2UgKmFyZSogbG9uZyBwcmVzc2luZy4uIC8vIEJ1dCBlaXRoZXIgaGFzIG5vIGxvbmcgaGFuZGxlclxuICAgICAgICAoIWhhc0xvbmdQcmVzc0hhbmRsZXIgfHwgIXRoaXMudG91Y2hhYmxlTG9uZ1ByZXNzQ2FuY2Vsc1ByZXNzKCkpOyAvLyBvciB3ZSdyZSB0b2xkIHRvIGlnbm9yZSBpdC5cblxuICAgICAgY29uc3Qgc2hvdWxkSW52b2tlUHJlc3MgPVxuICAgICAgICAhSXNMb25nUHJlc3NpbmdJbltjdXJTdGF0ZV0gfHwgcHJlc3NJc0xvbmdCdXRTdGlsbENhbGxPblByZXNzO1xuICAgICAgaWYgKHNob3VsZEludm9rZVByZXNzICYmIHRoaXMudG91Y2hhYmxlSGFuZGxlUHJlc3MpIHtcbiAgICAgICAgaWYgKCFuZXdJc0hpZ2hsaWdodCAmJiAhY3VySXNIaWdobGlnaHQpIHtcbiAgICAgICAgICAvLyB3ZSBuZXZlciBoaWdobGlnaHRlZCBiZWNhdXNlIG9mIGRlbGF5LCBidXQgd2Ugc2hvdWxkIGhpZ2hsaWdodCBub3dcbiAgICAgICAgICB0aGlzLl9zdGFydEhpZ2hsaWdodChlKTtcbiAgICAgICAgICB0aGlzLl9lbmRIaWdobGlnaHQoZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICAgICAgICB0aGlzLl9wbGF5VG91Y2hTb3VuZCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlUHJlc3MoZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCA9IG51bGw7XG4gIH0sXG5cbiAgX3BsYXlUb3VjaFNvdW5kOiBmdW5jdGlvbigpIHtcbiAgICBVSU1hbmFnZXIucGxheVRvdWNoU291bmQoKTtcbiAgfSxcblxuICBfc3RhcnRIaWdobGlnaHQ6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLl9zYXZlUHJlc3NJbkxvY2F0aW9uKGUpO1xuICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbiAmJiB0aGlzLnRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW4oZSk7XG4gIH0sXG5cbiAgX2VuZEhpZ2hsaWdodDogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIGlmICh0aGlzLnRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0KSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMudG91Y2hhYmxlR2V0UHJlc3NPdXREZWxheU1TICYmXG4gICAgICAgIHRoaXMudG91Y2hhYmxlR2V0UHJlc3NPdXREZWxheU1TKClcbiAgICAgICkge1xuICAgICAgICB0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dChlKTtcbiAgICAgICAgfSwgdGhpcy50b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0KGUpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB3aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1cjoge30sXG59O1xuXG4vKipcbiAqIFByb3ZpZGUgYW4gb3B0aW9uYWwgdmVyc2lvbiBvZiB0aGUgbWl4aW4gd2hlcmUgYHRvdWNoYWJsZUhhbmRsZUZvY3VzYCBhbmRcbiAqIGB0b3VjaGFibGVIYW5kbGVCbHVyYCBjYW4gYmUgb3ZlcnJpZGRlbi4gVGhpcyBhbGxvd3MgYXBwcm9wcmlhdGUgZGVmYXVsdHMgdG9cbiAqIGJlIHNldCBvbiBUViBwbGF0Zm9ybXMsIHdpdGhvdXQgYnJlYWtpbmcgZXhpc3RpbmcgaW1wbGVtZW50YXRpb25zIG9mXG4gKiBgVG91Y2hhYmxlYC5cbiAqL1xuY29uc3Qge1xuICB0b3VjaGFibGVIYW5kbGVGb2N1cyxcbiAgdG91Y2hhYmxlSGFuZGxlQmx1cixcbiAgLi4uVG91Y2hhYmxlTWl4aW5XaXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1clxufSA9IFRvdWNoYWJsZU1peGluO1xuVG91Y2hhYmxlTWl4aW4ud2l0aG91dERlZmF1bHRGb2N1c0FuZEJsdXIgPSBUb3VjaGFibGVNaXhpbldpdGhvdXREZWZhdWx0Rm9jdXNBbmRCbHVyO1xuXG5jb25zdCBUb3VjaGFibGUgPSB7XG4gIE1peGluOiBUb3VjaGFibGVNaXhpbixcbiAgVE9VQ0hfVEFSR0VUX0RFQlVHOiBmYWxzZSwgLy8gSGlnaGxpZ2h0cyBhbGwgdG91Y2hhYmxlIHRhcmdldHMuIFRvZ2dsZSB3aXRoIEluc3BlY3Rvci5cbiAgLyoqXG4gICAqIFJlbmRlcnMgYSBkZWJ1Z2dpbmcgb3ZlcmxheSB0byB2aXN1YWxpemUgdG91Y2ggdGFyZ2V0IHdpdGggaGl0U2xvcCAobWlnaHQgbm90IHdvcmsgb24gQW5kcm9pZCkuXG4gICAqL1xuICByZW5kZXJEZWJ1Z1ZpZXc6ICh7XG4gICAgY29sb3IsXG4gICAgaGl0U2xvcCxcbiAgfToge1xuICAgIGNvbG9yOiBzdHJpbmcgfCBudW1iZXIsXG4gICAgaGl0U2xvcDogRWRnZUluc2V0c1Byb3AsXG4gIH0pID0+IHtcbiAgICBpZiAoIVRvdWNoYWJsZS5UT1VDSF9UQVJHRVRfREVCVUcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoIV9fREVWX18pIHtcbiAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAnVG91Y2hhYmxlLlRPVUNIX1RBUkdFVF9ERUJVRyBzaG91bGQgbm90IGJlIGVuYWJsZWQgaW4gcHJvZCEnLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgZGVidWdIaXRTbG9wU3R5bGUgPSB7fTtcbiAgICBoaXRTbG9wID0gaGl0U2xvcCB8fCB7dG9wOiAwLCBib3R0b206IDAsIGxlZnQ6IDAsIHJpZ2h0OiAwfTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBoaXRTbG9wKSB7XG4gICAgICBkZWJ1Z0hpdFNsb3BTdHlsZVtrZXldID0gLWhpdFNsb3Bba2V5XTtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZENvbG9yID0gbm9ybWFsaXplQ29sb3IoY29sb3IpO1xuICAgIGlmICh0eXBlb2Ygbm9ybWFsaXplZENvbG9yICE9PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGhleENvbG9yID1cbiAgICAgICcjJyArICgnMDAwMDAwMDAnICsgbm9ybWFsaXplZENvbG9yLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC04KTtcbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXdcbiAgICAgICAgcG9pbnRlckV2ZW50cz1cIm5vbmVcIlxuICAgICAgICBzdHlsZT17W1xuICAgICAgICAgIHN0eWxlcy5kZWJ1ZyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBib3JkZXJDb2xvcjogaGV4Q29sb3Iuc2xpY2UoMCwgLTIpICsgJzU1JywgLy8gTW9yZSBvcGFxdWVcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogaGV4Q29sb3Iuc2xpY2UoMCwgLTIpICsgJzBGJywgLy8gTGVzcyBvcGFxdWVcbiAgICAgICAgICAgIC4uLmRlYnVnSGl0U2xvcFN0eWxlLFxuICAgICAgICAgIH0sXG4gICAgICAgIF19XG4gICAgICAvPlxuICAgICk7XG4gIH0sXG59O1xuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIGRlYnVnOiB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgYm9yZGVyV2lkdGg6IDEsXG4gICAgYm9yZGVyU3R5bGU6ICdkYXNoZWQnLFxuICB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVG91Y2hhYmxlO1xuIl19